const _0x233af3=_0x2297;function _0x2ce0(){const _0x56fd8f=['getTickets','Loading\x20ticket...','channel','Ticket\x20deleted:','span','animate-spin\x20rounded-full\x20h-12\x20w-12\x20border-b-2\x20border-emerald-600\x20mx-auto','Failed\x20to\x20escalate\x20ticket','Created\x20','text-sm\x20text-gray-500','slice','created_at','flex\x20items-center\x20justify-between\x20mt-3','assigned_to','useEffect','join','flex-1\x20px-4\x20py-2\x20border\x20border-gray-300\x20rounded-lg\x20hover:bg-gray-50','bg-gray-50\x20border\x20border-gray-200','8mtfAlx','admin','No\x20ticket\x20ID\x20provided.','jsx','text-xl\x20font-semibold\x20mb-4','Internal','bg-white\x20rounded-lg\x20shadow-md\x20p-6','278678iRksIf','resolved','text-gray-700\x20whitespace-pre-wrap','[useAuth]\x20Failed\x20to\x20refresh:','text-sm\x20text-gray-700','26JWKbNi','21mWFKiy','error','api','user_role','mt-2\x20text-gray-600','w-full\x20px-4\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700\x20disabled:opacity-50','text-xs\x20px-2\x20py-1\x20bg-gray-200\x20rounded','flex\x20gap-3\x20mt-4','Category:','Send\x20Message','rounded\x20border-gray-300\x20text-emerald-600\x20focus:ring-emerald-500','Messages','updateTicket','trim','webpackChunk_N_E','INSERT','Ticket\x20Information','useSearchParams','autoRefresh','button','p-4\x20rounded-lg\x20','min-h-screen\x20bg-gray-50\x20py-8','bg-gray-100\x20text-gray-800','5OUdgkl','[useAuth]\x20Token\x20refreshed\x20successfully','getSupabase','ml-2\x20font-medium','bg-yellow-50\x20border\x20border-yellow-200','2872292VlphDO','ticket_messages_changes','[useAuth]\x20No\x20session\x20returned\x20after\x20refresh','ticket','postgres_changes','then','session','[useAuth]\x20Session\x20refreshed\x20successfully','getProfile','enableRealtime','catch','refreshInterval','7243257jdRQXX','unsubscribe','target','22430LbVYBx','subscribe','support_tickets','Assign\x20to\x20Me','display_name','13612308SGfTVn','textarea','label','/dashboard','w-full\x20px-4\x20py-3\x20border\x20border-gray-300\x20rounded-lg\x20focus:ring-2\x20focus:ring-emerald-500\x20focus:border-transparent\x20resize-none','bg-green-100\x20text-green-800','font-semibold\x20text-gray-900','border-t\x20pt-4','flex\x20items-center\x20gap-2','log','grid\x20grid-cols-1\x20lg:grid-cols-3\x20gap-6','push','split','/admin/tickets','category','User:','useState','createTicket','font-semibold\x20mb-4','author','6486057ktnlje','bg-orange-100\x20text-orange-800','Failed\x20to\x20fetch\x20tickets','bind','charAt','user','11462IfYhgt','Back\x20to\x20Tickets','mt-4\x20text-gray-600','messages','is_system','signOut','text-2xl\x20font-bold\x20text-gray-900','System','usePathname','max-w-7xl\x20mx-auto\x20px-4\x20sm:px-6\x20lg:px-8','useCallback','â†\x20Back\x20to\x20Tickets','is_internal','escalation_level','Failed\x20to\x20create\x20ticket','Assigned\x20to:','status','space-y-4\x20mb-6','text-center','useRouter','message','1220QtmYFX','Actions','text-gray-600','bg-red-100\x20text-red-800','Ticket\x20created:','priority','id=eq.','div','checked','onAuthStateChange','6vhgihj','text-red-600','bg-blue-100\x20text-blue-800','ml-2\x20px-3\x20py-1\x20text-sm\x20font-medium\x20rounded-full\x20','ticket_id=eq.','jsxs','Mark\x20as\x20Resolved'];_0x2ce0=function(){return _0x56fd8f;};return _0x2ce0();}function _0x2297(_0x3142d1,_0x2c640e){_0x3142d1=_0x3142d1-0xc9;const _0x2ce07a=_0x2ce0();let _0x2297a2=_0x2ce07a[_0x3142d1];return _0x2297a2;}(function(_0x523d16,_0x23c047){const _0x3c0923=_0x2297,_0x3ba164=_0x523d16();while(!![]){try{const _0x502fef=-parseInt(_0x3c0923(0xea))/0x1+-parseInt(_0x3c0923(0x147))/0x2*(-parseInt(_0x3c0923(0x14d))/0x3)+parseInt(_0x3c0923(0xdb))/0x4*(-parseInt(_0x3c0923(0xd6))/0x5)+-parseInt(_0x3c0923(0x128))/0x6*(parseInt(_0x3c0923(0xe7))/0x7)+-parseInt(_0x3c0923(0x140))/0x8*(parseInt(_0x3c0923(0x103))/0x9)+-parseInt(_0x3c0923(0x11e))/0xa*(parseInt(_0x3c0923(0x109))/0xb)+parseInt(_0x3c0923(0xef))/0xc*(parseInt(_0x3c0923(0x14c))/0xd);if(_0x502fef===_0x23c047)break;else _0x3ba164['push'](_0x3ba164['shift']());}catch(_0x35b48c){_0x3ba164['push'](_0x3ba164['shift']());}}}(_0x2ce0,0x979f0),(self[_0x233af3(0xcd)]=self['webpackChunk_N_E']||[])['push']([[0xe1f],{0x165b:(_0x40dcd4,_0x2f80c5,_0x10d653)=>{const _0x5ad3df=_0x233af3;Promise['resolve']()[_0x5ad3df(0xe0)](_0x10d653[_0x5ad3df(0x106)](_0x10d653,0xc69c));},0xc541:(_0x160bde,_0x3a8614,_0x1fe9b1)=>{'use strict';const _0x5cb7af=_0x233af3;var _0x5d7881=_0x1fe9b1(0xed0d);_0x1fe9b1['o'](_0x5d7881,'usePathname')&&_0x1fe9b1['d'](_0x3a8614,{'usePathname':function(){const _0x2d6c66=_0x2297;return _0x5d7881[_0x2d6c66(0x111)];}}),_0x1fe9b1['o'](_0x5d7881,'useRouter')&&_0x1fe9b1['d'](_0x3a8614,{'useRouter':function(){const _0x13d90c=_0x2297;return _0x5d7881[_0x13d90c(0x11c)];}}),_0x1fe9b1['o'](_0x5d7881,_0x5cb7af(0xd0))&&_0x1fe9b1['d'](_0x3a8614,{'useSearchParams':function(){return _0x5d7881['useSearchParams'];}});},0xc69c:(_0x39bcf9,_0x32ad00,_0x175a6a)=>{'use strict';_0x175a6a['r'](_0x32ad00),_0x175a6a['d'](_0x32ad00,{'default':()=>_0x34190b});var _0x5c9dd0=_0x175a6a(0xd773),_0x118669=_0x175a6a(0x5433),_0x1d5c5b=_0x175a6a(0x10edb),_0x5b2623=_0x175a6a(0xc541),_0x5478e5=_0x175a6a(0x14a5a);function _0x34190b(){const _0x2a1cbe=_0x2297;let {user:_0x564c53,loading:_0x22b21c}=(0x0,_0x1d5c5b['A'])(),_0x4f37e2=(0x0,_0x5b2623['useRouter'])(),_0x72a79c=(0x0,_0x5b2623[_0x2a1cbe(0xd0)])()['get']('id'),{ticket:_0x2f7842,loading:_0x50c759,error:_0x47ce86,refetch:_0x370414}=(0x0,_0x5478e5['yS'])(_0x72a79c||''),{updateTicket:_0x4c6fcd,loading:_0x34c025}=(0x0,_0x5478e5['tY'])(),{escalateTicket:_0x5bc483,loading:_0x1c5533}=(0x0,_0x5478e5['oJ'])(),{addMessage:_0x4e250a,loading:_0x16b5db}=(0x0,_0x5478e5['c0'])(),[_0x3365d7,_0x267dc3]=(0x0,_0x118669['useState'])(''),[_0x351d6a,_0x12ef1c]=(0x0,_0x118669[_0x2a1cbe(0xff)])(!0x1),[_0x479b06,_0x304cc9]=(0x0,_0x118669[_0x2a1cbe(0xff)])(!0x1),[_0x4d9418,_0x2c2975]=(0x0,_0x118669['useState'])(''),[_0x430ae8,_0x209d35]=(0x0,_0x118669[_0x2a1cbe(0xff)])(null);(0x0,_0x118669[_0x2a1cbe(0x13c)])(()=>{const _0x599d0c=_0x2a1cbe;_0x22b21c||_0x564c53?_0x564c53&&Promise['resolve']()['then'](_0x175a6a[_0x599d0c(0x106)](_0x175a6a,0x3e0d))['then'](({api:_0x458512})=>{const _0x5ef7e8=_0x599d0c;_0x458512[_0x5ef7e8(0xe3)]()['then'](_0x3344f0=>{const _0x2a5cf5=_0x5ef7e8;_0x209d35(_0x3344f0);let _0x4965cf=_0x3344f0?.['user_role'];_0x3344f0&&![_0x2a5cf5(0x141),'manager','support']['includes'](_0x4965cf||'')&&_0x4f37e2['push'](_0x2a5cf5(0xf2));})[_0x5ef7e8(0xe5)](()=>{const _0xbf0165=_0x5ef7e8;_0x4f37e2['push'](_0xbf0165(0xf2));});}):_0x4f37e2[_0x599d0c(0xfa)]('/auth/login');},[_0x564c53,_0x22b21c,_0x4f37e2]);let _0x2aef7a=async()=>{const _0x3be123=_0x2a1cbe;if(_0x3365d7['trim']()&&_0x72a79c)try{await _0x4e250a({'ticketId':_0x72a79c,'message':_0x3365d7,'isInternal':_0x351d6a}),_0x267dc3(''),_0x12ef1c(!0x1),_0x370414();}catch(_0x3e95d5){console[_0x3be123(0x14e)]('Failed\x20to\x20send\x20message:',_0x3e95d5);}},_0x318f4b=async _0x404c1e=>{if(_0x72a79c)try{await _0x4c6fcd({'ticketId':_0x72a79c,'status':_0x404c1e}),_0x370414();}catch(_0x1883d5){console['error']('Failed\x20to\x20update\x20status:',_0x1883d5);}},_0x80c446=async()=>{const _0x18990b=_0x2a1cbe;if(_0x430ae8&&_0x72a79c)try{await _0x4c6fcd({'ticketId':_0x72a79c,'assigned_to':_0x430ae8['id']}),_0x370414();}catch(_0x32131e){console[_0x18990b(0x14e)]('Failed\x20to\x20assign\x20ticket:',_0x32131e);}},_0x1e65fc=async()=>{const _0x4e1065=_0x2a1cbe;if(_0x4d9418[_0x4e1065(0xcc)]()&&_0x72a79c)try{await _0x5bc483({'ticketId':_0x72a79c,'reason':_0x4d9418}),_0x304cc9(!0x1),_0x2c2975(''),_0x370414();}catch(_0x5db6ec){console[_0x4e1065(0x14e)]('Failed\x20to\x20escalate\x20ticket:',_0x5db6ec);}};return _0x72a79c?_0x22b21c||_0x50c759?(0x0,_0x5c9dd0['jsx'])('div',{'className':'flex\x20items-center\x20justify-center\x20min-h-screen','children':(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])('div',{'className':_0x2a1cbe(0x11b),'children':[(0x0,_0x5c9dd0['jsx'])('div',{'className':_0x2a1cbe(0x134)}),(0x0,_0x5c9dd0['jsx'])('p',{'className':_0x2a1cbe(0x10b),'children':_0x2a1cbe(0x130)})]})}):_0x47ce86||!_0x2f7842?(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0x125),{'className':'flex\x20items-center\x20justify-center\x20min-h-screen','children':(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':'text-center','children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('p',{'className':_0x2a1cbe(0x129),'children':'Failed\x20to\x20load\x20ticket'}),(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0xd2),{'onClick':()=>_0x4f37e2['push'](_0x2a1cbe(0xfc)),'className':'mt-4\x20text-emerald-600\x20hover:text-emerald-700','children':_0x2a1cbe(0x10a)})]})}):(_0x430ae8?.[_0x2a1cbe(0x150)],(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':_0x2a1cbe(0xd4),'children':[(0x0,_0x5c9dd0['jsxs'])(_0x2a1cbe(0x125),{'className':'max-w-7xl\x20mx-auto\x20px-4\x20sm:px-6\x20lg:px-8','children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])('div',{'className':'mb-6','children':[(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0xd2),{'onClick':()=>_0x4f37e2['push']('/admin/tickets'),'className':'text-gray-600\x20hover:text-gray-900\x20mb-4\x20flex\x20items-center\x20gap-2','children':_0x2a1cbe(0x114)}),(0x0,_0x5c9dd0['jsx'])('h1',{'className':'text-3xl\x20font-bold\x20text-gray-900','children':_0x2f7842['title']})]}),(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':_0x2a1cbe(0xf9),'children':[(0x0,_0x5c9dd0['jsxs'])(_0x2a1cbe(0x125),{'className':'lg:col-span-2\x20space-y-6','children':[(0x0,_0x5c9dd0['jsxs'])('div',{'className':_0x2a1cbe(0x146),'children':[(0x0,_0x5c9dd0['jsxs'])(_0x2a1cbe(0x125),{'className':'flex\x20items-start\x20justify-between\x20mb-4','children':[(0x0,_0x5c9dd0['jsxs'])(_0x2a1cbe(0x125),{'children':[(0x0,_0x5c9dd0['jsx'])('span',{'className':'px-3\x20py-1\x20text-sm\x20font-medium\x20rounded-full\x20'+({'open':_0x2a1cbe(0x12a),'in_progress':'bg-yellow-100\x20text-yellow-800','waiting_response':'bg-purple-100\x20text-purple-800','escalated':_0x2a1cbe(0x121),'resolved':_0x2a1cbe(0xf4),'closed':'bg-gray-100\x20text-gray-800'}[_0x2f7842[_0x2a1cbe(0x119)]]||'bg-gray-100\x20text-gray-800'),'children':_0x2f7842[_0x2a1cbe(0x119)][_0x2a1cbe(0xfb)]('_')['map'](_0x160038=>_0x160038['charAt'](0x0)['toUpperCase']()+_0x160038[_0x2a1cbe(0x138)](0x1))[_0x2a1cbe(0x13d)]('\x20')}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0x133),{'className':_0x2a1cbe(0x12b)+({'low':'bg-gray-100\x20text-gray-800','medium':_0x2a1cbe(0x12a),'high':_0x2a1cbe(0x104),'urgent':_0x2a1cbe(0x121)}[_0x2f7842[_0x2a1cbe(0x123)]]||_0x2a1cbe(0xd5)),'children':_0x2f7842[_0x2a1cbe(0x123)]})]}),(0x0,_0x5c9dd0['jsxs'])('span',{'className':_0x2a1cbe(0x137),'children':[_0x2a1cbe(0x136),_0x5897b3(_0x2f7842[_0x2a1cbe(0x139)])]})]}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('p',{'className':'text-gray-700\x20whitespace-pre-wrap','children':_0x2f7842['description']})]}),(0x0,_0x5c9dd0['jsxs'])(_0x2a1cbe(0x125),{'className':'bg-white\x20rounded-lg\x20shadow-md\x20p-6','children':[(0x0,_0x5c9dd0['jsx'])('h2',{'className':'text-xl\x20font-semibold\x20mb-4','children':_0x2a1cbe(0xca)}),(0x0,_0x5c9dd0['jsx'])('div',{'className':_0x2a1cbe(0x11a),'children':_0x2f7842[_0x2a1cbe(0x10c)]['map'](_0x2bf3bc=>(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])('div',{'className':_0x2a1cbe(0xd3)+(_0x2bf3bc['is_internal']?_0x2a1cbe(0xda):_0x2bf3bc[_0x2a1cbe(0x10d)]?_0x2a1cbe(0x13f):'bg-blue-50\x20border\x20border-blue-200'),'children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':'flex\x20items-start\x20justify-between\x20mb-2','children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])('div',{'className':'flex\x20items-center\x20gap-2','children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0x133),{'className':_0x2a1cbe(0xf5),'children':_0x2bf3bc[_0x2a1cbe(0x102)]?.[_0x2a1cbe(0xee)]||_0x2a1cbe(0x110)}),_0x2bf3bc[_0x2a1cbe(0x102)]&&(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('span',{'className':_0x2a1cbe(0x153),'children':_0x2bf3bc[_0x2a1cbe(0x102)][_0x2a1cbe(0x150)]}),_0x2bf3bc[_0x2a1cbe(0x115)]&&(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0x133),{'className':'text-xs\x20px-2\x20py-1\x20bg-yellow-200\x20rounded','children':_0x2a1cbe(0x145)})]}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('span',{'className':'text-xs\x20text-gray-500','children':_0x5897b3(_0x2bf3bc['created_at'])})]}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('p',{'className':_0x2a1cbe(0x149),'children':_0x2bf3bc[_0x2a1cbe(0x11d)]})]},_0x2bf3bc['id']))}),(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':_0x2a1cbe(0xf6),'children':[(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0xf0),{'value':_0x3365d7,'onChange':_0x187fba=>_0x267dc3(_0x187fba['target']['value']),'placeholder':'Type\x20your\x20message...','className':'w-full\x20px-4\x20py-3\x20border\x20border-gray-300\x20rounded-lg\x20focus:ring-2\x20focus:ring-emerald-500\x20focus:border-transparent\x20resize-none','rows':0x4}),(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':_0x2a1cbe(0x13a),'children':[(0x0,_0x5c9dd0['jsxs'])(_0x2a1cbe(0xf1),{'className':_0x2a1cbe(0xf7),'children':[(0x0,_0x5c9dd0['jsx'])('input',{'type':'checkbox','checked':_0x351d6a,'onChange':_0x14431c=>_0x12ef1c(_0x14431c['target'][_0x2a1cbe(0x126)]),'className':_0x2a1cbe(0xc9)}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0x133),{'className':_0x2a1cbe(0x14b),'children':'Internal\x20note\x20(not\x20visible\x20to\x20user)'})]}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('button',{'onClick':_0x2aef7a,'disabled':_0x16b5db||!_0x3365d7['trim'](),'className':'px-6\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700\x20disabled:opacity-50\x20disabled:cursor-not-allowed','children':_0x16b5db?'Sending...':_0x2a1cbe(0x156)})]})]})]})]}),(0x0,_0x5c9dd0['jsxs'])('div',{'className':'space-y-6','children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':_0x2a1cbe(0x146),'children':[(0x0,_0x5c9dd0['jsx'])('h3',{'className':_0x2a1cbe(0x101),'children':_0x2a1cbe(0x11f)}),(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':'space-y-3','children':[!_0x2f7842[_0x2a1cbe(0x13b)]&&(0x0,_0x5c9dd0['jsx'])('button',{'onClick':_0x80c446,'disabled':_0x34c025,'className':_0x2a1cbe(0x152),'children':_0x2a1cbe(0xed)}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('button',{'onClick':()=>_0x304cc9(!0x0),'disabled':_0x1c5533||_0x2f7842[_0x2a1cbe(0x116)]>=0x3,'className':'w-full\x20px-4\x20py-2\x20bg-orange-600\x20text-white\x20rounded-lg\x20hover:bg-orange-700\x20disabled:opacity-50','children':'Escalate\x20Ticket'}),_0x2a1cbe(0x148)!==_0x2f7842['status']&&(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0xd2),{'onClick':()=>_0x318f4b('resolved'),'disabled':_0x34c025,'className':'w-full\x20px-4\x20py-2\x20bg-green-600\x20text-white\x20rounded-lg\x20hover:bg-green-700\x20disabled:opacity-50','children':_0x2a1cbe(0x12e)})]})]}),(0x0,_0x5c9dd0['jsxs'])('div',{'className':_0x2a1cbe(0x146),'children':[(0x0,_0x5c9dd0['jsx'])('h3',{'className':'font-semibold\x20mb-4','children':_0x2a1cbe(0xcf)}),(0x0,_0x5c9dd0['jsxs'])('div',{'className':'space-y-3\x20text-sm','children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'children':[(0x0,_0x5c9dd0['jsx'])('span',{'className':_0x2a1cbe(0x120),'children':_0x2a1cbe(0x155)}),(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0x133),{'className':'ml-2\x20font-medium','children':_0x2f7842[_0x2a1cbe(0xfd)]['split']('_')['map'](_0x1318d9=>_0x1318d9[_0x2a1cbe(0x107)](0x0)['toUpperCase']()+_0x1318d9['slice'](0x1))['join']('\x20')})]}),(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0x133),{'className':'text-gray-600','children':_0x2a1cbe(0xfe)}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0x133),{'className':_0x2a1cbe(0xd9),'children':_0x2f7842['user']?.[_0x2a1cbe(0xee)]})]}),_0x2f7842[_0x2a1cbe(0x13b)]&&(0x0,_0x5c9dd0['jsxs'])('div',{'children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0x133),{'className':_0x2a1cbe(0x120),'children':_0x2a1cbe(0x118)}),(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0x133),{'className':_0x2a1cbe(0xd9),'children':_0x2f7842['assignee']?.['display_name']})]}),(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('span',{'className':'text-gray-600','children':'Escalation\x20Level:'}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('span',{'className':'ml-2\x20font-medium','children':_0x2f7842[_0x2a1cbe(0x116)]})]})]})]})]})]})]}),_0x479b06&&(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0x125),{'className':'fixed\x20inset-0\x20bg-black\x20bg-opacity-50\x20flex\x20items-center\x20justify-center\x20z-50','children':(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':'bg-white\x20rounded-lg\x20p-6\x20max-w-md\x20w-full\x20mx-4','children':[(0x0,_0x5c9dd0['jsx'])('h3',{'className':_0x2a1cbe(0x144),'children':'Escalate\x20Ticket'}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('textarea',{'value':_0x4d9418,'onChange':_0x1735a5=>_0x2c2975(_0x1735a5[_0x2a1cbe(0xe9)]['value']),'placeholder':'Reason\x20for\x20escalation...','className':_0x2a1cbe(0xf3),'rows':0x4}),(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])('div',{'className':_0x2a1cbe(0x154),'children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('button',{'onClick':()=>_0x304cc9(!0x1),'className':_0x2a1cbe(0x13e),'children':'Cancel'}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0xd2),{'onClick':_0x1e65fc,'disabled':!_0x4d9418[_0x2a1cbe(0xcc)]()||_0x1c5533,'className':'flex-1\x20px-4\x20py-2\x20bg-orange-600\x20text-white\x20rounded-lg\x20hover:bg-orange-700\x20disabled:opacity-50','children':_0x1c5533?'Escalating...':'Escalate'})]})]})})]})):(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])(_0x2a1cbe(0x125),{'className':'min-h-screen\x20bg-gray-50\x20py-8','children':(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('div',{'className':_0x2a1cbe(0x112),'children':(0x0,_0x5c9dd0[_0x2a1cbe(0x12d)])(_0x2a1cbe(0x125),{'className':'text-center','children':[(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('h2',{'className':_0x2a1cbe(0x10f),'children':'Ticket\x20Not\x20Found'}),(0x0,_0x5c9dd0[_0x2a1cbe(0x143)])('p',{'className':_0x2a1cbe(0x151),'children':_0x2a1cbe(0x142)}),(0x0,_0x5c9dd0['jsx'])(_0x2a1cbe(0xd2),{'onClick':()=>_0x4f37e2[_0x2a1cbe(0xfa)]('/admin/tickets'),'className':'mt-4\x20px-4\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700','children':'Back\x20to\x20Tickets'})]})})});}function _0x5897b3(_0x4fa2ef){return new Date(_0x4fa2ef)['toLocaleString']();}},0x10edb:(_0x19dc1e,_0x291f4e,_0x147e6f)=>{'use strict';_0x147e6f['d'](_0x291f4e,{'A':()=>_0x4f464c});var _0xac660e=_0x147e6f(0x5433),_0x23bbe3=_0x147e6f(0x3e0d);function _0x4f464c(){const _0x414d7d=_0x2297;let [_0x58ec48,_0x4d0d4d]=(0x0,_0xac660e['useState'])(null),[_0x386155,_0x3ab5d0]=(0x0,_0xac660e[_0x414d7d(0xff)])(!0x0),[_0x2be17a,_0x59ca87]=(0x0,_0xac660e[_0x414d7d(0xff)])(!0x1),[_0x475b52,_0x227d80]=(0x0,_0xac660e['useState'])(null),_0x4992a1=(0x0,_0xac660e['useCallback'])(async()=>{const _0x353d99=_0x414d7d;try{let _0x72267d=(0x0,_0x23bbe3[_0x353d99(0xd8)])(),{data:_0x512971,error:_0x517309}=await _0x72267d['auth']['refreshSession']();if(_0x517309)return console[_0x353d99(0x14e)]('[useAuth]\x20Refresh\x20error:',_0x517309),!0x1;if(!_0x512971?.['session'])return console[_0x353d99(0x14e)](_0x353d99(0xdd)),!0x1;return _0x227d80(_0x512971[_0x353d99(0xe1)]),_0x4d0d4d(_0x512971['session']['user']),console[_0x353d99(0xf8)](_0x353d99(0xe2)),!0x0;}catch(_0x1e5ec0){return console[_0x353d99(0x14e)](_0x353d99(0x14a),_0x1e5ec0),!0x1;}},[]);return(0x0,_0xac660e['useEffect'])(()=>{const _0x1f1e40=_0x414d7d;_0x23bbe3['api']['getUser']()[_0x1f1e40(0xe0)](({data:{user:_0x8745f2}})=>{_0x4d0d4d(_0x8745f2),_0x3ab5d0(!0x1),_0x59ca87(!0x0);})['catch'](()=>{_0x3ab5d0(!0x1),_0x59ca87(!0x0);});let {data:{subscription:_0xe79252}}=_0x23bbe3[_0x1f1e40(0x14f)][_0x1f1e40(0x127)](async(_0x5d80d9,_0x405bc7)=>{const _0x50811c=_0x1f1e40;console['log']('[useAuth]\x20Auth\x20state\x20change:',_0x5d80d9),'TOKEN_REFRESHED'===_0x5d80d9&&console[_0x50811c(0xf8)](_0x50811c(0xd7)),_0x227d80(_0x405bc7),_0x4d0d4d(_0x405bc7?.[_0x50811c(0x108)]??null),_0x3ab5d0(!0x1),_0x59ca87(!0x0);});return()=>_0xe79252[_0x1f1e40(0xe8)]();},[]),{'user':_0x58ec48,'session':_0x475b52,'loading':_0x386155,'isReady':_0x2be17a,'authenticated':!!_0x58ec48,'refreshSession':_0x4992a1,'signOut':()=>_0x23bbe3[_0x414d7d(0x14f)][_0x414d7d(0x10e)]()};}},0x14a5a:(_0x2999f8,_0x1459fc,_0x4eec72)=>{'use strict';_0x4eec72['d'](_0x1459fc,{'c0':()=>_0x18e6c5,'Gs':()=>_0x2ea89c,'oJ':()=>_0x3fc757,'yS':()=>_0x2daa64,'dS':()=>_0x4f6a0a,'tY':()=>_0x14a178});var _0x29f535=_0x4eec72(0x5433),_0x478ca5=_0x4eec72(0x3e0d);function _0x5d003c(_0x53250e={}){const _0x336728=_0x2297;let {onTicketCreated:_0x31b99b,onTicketUpdated:_0x361640,onTicketDeleted:_0x115e3b,onMessageAdded:_0x3e429a,ticketId:_0x458687}=_0x53250e;(0x0,_0x29f535[_0x336728(0x13c)])(()=>{const _0x18a2c0=_0x336728;let _0x2cee23=(0x0,_0x478ca5['getSupabase'])(),_0x5a786a=_0x2cee23[_0x18a2c0(0x131)]('support_tickets_changes')['on'](_0x18a2c0(0xdf),{'event':'INSERT','schema':'api','table':_0x18a2c0(0xec)},_0x5b8e1d=>{const _0x1c6dbb=_0x18a2c0;console[_0x1c6dbb(0xf8)](_0x1c6dbb(0x122),_0x5b8e1d),_0x31b99b?.(_0x5b8e1d);})['on']('postgres_changes',{'event':'UPDATE','schema':_0x18a2c0(0x14f),'table':'support_tickets',..._0x458687?{'filter':_0x18a2c0(0x124)+_0x458687}:{}},_0x10fc0b=>{const _0x4e25e2=_0x18a2c0;console[_0x4e25e2(0xf8)]('Ticket\x20updated:',_0x10fc0b),_0x361640?.(_0x10fc0b);})['on'](_0x18a2c0(0xdf),{'event':'DELETE','schema':'api','table':'support_tickets'},_0x5a0f3b=>{const _0x2986d1=_0x18a2c0;console[_0x2986d1(0xf8)](_0x2986d1(0x132),_0x5a0f3b),_0x115e3b?.(_0x5a0f3b);})['subscribe'](),_0x2ca730=null;return _0x458687&&_0x3e429a&&(_0x2ca730=_0x2cee23['channel'](_0x18a2c0(0xdc))['on']('postgres_changes',{'event':_0x18a2c0(0xce),'schema':'api','table':'ticket_messages','filter':_0x18a2c0(0x12c)+_0x458687},_0x56355c=>{const _0x4f7b07=_0x18a2c0;console[_0x4f7b07(0xf8)]('Message\x20added:',_0x56355c),_0x3e429a(_0x56355c);})[_0x18a2c0(0xeb)]()),()=>{_0x2cee23['removeChannel'](_0x5a786a),_0x2ca730&&_0x2cee23['removeChannel'](_0x2ca730);};},[_0x31b99b,_0x361640,_0x115e3b,_0x3e429a,_0x458687]);}function _0x4f6a0a(_0x5dc17b={}){const _0x24b916=_0x2297;let [_0x2f571a,_0xe67fe6]=(0x0,_0x29f535[_0x24b916(0xff)])([]),[_0x4e4ac9,_0x23aee2]=(0x0,_0x29f535['useState'])(!0x0),[_0x2a9e5a,_0x154fed]=(0x0,_0x29f535['useState'])(null),[_0x378ac0,_0x56e5f0]=(0x0,_0x29f535[_0x24b916(0xff)])(0x0),_0x44ad46=(0x0,_0x29f535[_0x24b916(0x113)])(async()=>{const _0x401bfc=_0x24b916;try{_0x23aee2(!0x0),_0x154fed(null);let {tickets:_0x5ed787,total:_0x23b85a}=await _0x478ca5[_0x401bfc(0x14f)][_0x401bfc(0x12f)]({'status':_0x5dc17b['status'],'category':_0x5dc17b['category'],'assigned_to':_0x5dc17b['assigned_to']});_0xe67fe6(_0x5ed787),_0x56e5f0(_0x23b85a);}catch(_0x43967e){_0x154fed(_0x43967e instanceof Error?_0x43967e[_0x401bfc(0x11d)]:_0x401bfc(0x105));}finally{_0x23aee2(!0x1);}},[_0x5dc17b['status'],_0x5dc17b[_0x24b916(0xfd)],_0x5dc17b['assigned_to']]);return(0x0,_0x29f535[_0x24b916(0x13c)])(()=>{const _0x358cb0=_0x24b916;if(_0x44ad46(),_0x5dc17b[_0x358cb0(0xd1)]&&_0x5dc17b[_0x358cb0(0xe6)]){let _0x131e9b=setInterval(_0x44ad46,_0x5dc17b[_0x358cb0(0xe6)]);return()=>clearInterval(_0x131e9b);}},[_0x44ad46,_0x5dc17b['autoRefresh'],_0x5dc17b[_0x24b916(0xe6)]]),_0x5d003c({'onTicketCreated':!0x1!==_0x5dc17b[_0x24b916(0xe4)]?()=>_0x44ad46():void 0x0,'onTicketUpdated':!0x1!==_0x5dc17b['enableRealtime']?()=>_0x44ad46():void 0x0,'onTicketDeleted':!0x1!==_0x5dc17b['enableRealtime']?()=>_0x44ad46():void 0x0}),{'tickets':_0x2f571a,'loading':_0x4e4ac9,'error':_0x2a9e5a,'total':_0x378ac0,'refetch':_0x44ad46};}function _0x2daa64(_0x2f03c2,_0x4dfa7b=!0x0){const _0x2b16ce=_0x2297;let [_0x7639f3,_0x18f0af]=(0x0,_0x29f535[_0x2b16ce(0xff)])(null),[_0x2eb44a,_0x2cc42b]=(0x0,_0x29f535[_0x2b16ce(0xff)])(!0x0),[_0x1a9f78,_0x44a35e]=(0x0,_0x29f535['useState'])(null),_0x1f61fa=(0x0,_0x29f535[_0x2b16ce(0x113)])(async()=>{const _0x519c99=_0x2b16ce;if(!_0x2f03c2){_0x18f0af(null),_0x2cc42b(!0x1);return;}try{_0x2cc42b(!0x0),_0x44a35e(null);let _0x2774d3=await _0x478ca5[_0x519c99(0x14f)]['getTicket'](_0x2f03c2);_0x18f0af(_0x2774d3);}catch(_0x10e71a){_0x44a35e(_0x10e71a instanceof Error?_0x10e71a[_0x519c99(0x11d)]:'Failed\x20to\x20fetch\x20ticket');}finally{_0x2cc42b(!0x1);}},[_0x2f03c2]);return(0x0,_0x29f535[_0x2b16ce(0x13c)])(()=>{_0x1f61fa();},[_0x1f61fa]),_0x5d003c({'ticketId':_0x2f03c2||void 0x0,'onTicketUpdated':_0x4dfa7b?()=>_0x1f61fa():void 0x0,'onMessageAdded':_0x4dfa7b?()=>_0x1f61fa():void 0x0}),{'ticket':_0x7639f3,'loading':_0x2eb44a,'error':_0x1a9f78,'refetch':_0x1f61fa};}function _0x2ea89c(){let [_0x3e5c78,_0x292dde]=(0x0,_0x29f535['useState'])(!0x1),[_0x1fbcf1,_0x2b26c8]=(0x0,_0x29f535['useState'])(null);return{'createTicket':async _0x5101ae=>{const _0x2988bc=_0x2297;try{return _0x292dde(!0x0),_0x2b26c8(null),(await _0x478ca5['api'][_0x2988bc(0x100)](_0x5101ae))['ticket'];}catch(_0x56ae78){let _0x5c49e4=_0x56ae78 instanceof Error?_0x56ae78['message']:_0x2988bc(0x117);throw _0x2b26c8(_0x5c49e4),Error(_0x5c49e4);}finally{_0x292dde(!0x1);}},'loading':_0x3e5c78,'error':_0x1fbcf1};}function _0x14a178(){const _0x45738b=_0x2297;let [_0x254a1f,_0x2089b1]=(0x0,_0x29f535['useState'])(!0x1),[_0x29ce77,_0xcacb55]=(0x0,_0x29f535[_0x45738b(0xff)])(null);return{'updateTicket':async _0x28e8d0=>{const _0x8d52dc=_0x45738b;try{return _0x2089b1(!0x0),_0xcacb55(null),(await _0x478ca5['api'][_0x8d52dc(0xcb)](_0x28e8d0))[_0x8d52dc(0xde)];}catch(_0x4d84b4){let _0x2846b5=_0x4d84b4 instanceof Error?_0x4d84b4['message']:'Failed\x20to\x20update\x20ticket';throw _0xcacb55(_0x2846b5),Error(_0x2846b5);}finally{_0x2089b1(!0x1);}},'loading':_0x254a1f,'error':_0x29ce77};}function _0x3fc757(){const _0x4b9233=_0x2297;let [_0x2a8b3e,_0x3c19c0]=(0x0,_0x29f535[_0x4b9233(0xff)])(!0x1),[_0x27f720,_0x29627c]=(0x0,_0x29f535['useState'])(null);return{'escalateTicket':async _0x8e11fc=>{const _0x3295e0=_0x4b9233;try{return _0x3c19c0(!0x0),_0x29627c(null),(await _0x478ca5[_0x3295e0(0x14f)]['escalateTicket'](_0x8e11fc))[_0x3295e0(0xde)];}catch(_0x18c99e){let _0x12fd95=_0x18c99e instanceof Error?_0x18c99e[_0x3295e0(0x11d)]:_0x3295e0(0x135);throw _0x29627c(_0x12fd95),Error(_0x12fd95);}finally{_0x3c19c0(!0x1);}},'loading':_0x2a8b3e,'error':_0x27f720};}function _0x18e6c5(){const _0x161858=_0x2297;let [_0x42139b,_0x45c5c4]=(0x0,_0x29f535[_0x161858(0xff)])(!0x1),[_0x2e11dc,_0xfce52a]=(0x0,_0x29f535['useState'])(null);return{'addMessage':async _0x298408=>{try{return _0x45c5c4(!0x0),_0xfce52a(null),(await _0x478ca5['api']['addTicketMessage'](_0x298408))['message'];}catch(_0x47a0ab){let _0xe07a40=_0x47a0ab instanceof Error?_0x47a0ab['message']:'Failed\x20to\x20add\x20message';throw _0xfce52a(_0xe07a40),Error(_0xe07a40);}finally{_0x45c5c4(!0x1);}},'loading':_0x42139b,'error':_0x2e11dc};}}},_0x5b117d=>{_0x5b117d['O'](0x0,[0x2603,0x259f,0x16fd,0x1b1b,0x492,0x1cbe],()=>_0x5b117d(_0x5b117d['s']=0x165b)),_N_E=_0x5b117d['O']();}]));