const _0x3838b8=_0x4768;function _0x448e(){const _0xe169ad=['min-h-screen\x20bg-gray-50\x20py-8','flex\x20items-center\x20justify-between\x20mt-3','checked','slice','text-gray-600','w-full\x20px-4\x20py-2\x20bg-green-600\x20text-white\x20rounded-lg\x20hover:bg-green-700\x20disabled:opacity-50','useSearchParams','bg-white\x20rounded-lg\x20p-6\x20max-w-md\x20w-full\x20mx-4','User:','log','bg-yellow-100\x20text-yellow-800','/admin/tickets','manager','join','bg-white\x20rounded-lg\x20shadow-md\x20p-6','onAuthStateChange','category','grid\x20grid-cols-1\x20lg:grid-cols-3\x20gap-6','escalation_level','createTicket','Escalate\x20Ticket','div','checkbox','session','Failed\x20to\x20assign\x20ticket:','/auth/login','text-sm\x20text-gray-700','flex\x20items-start\x20justify-between\x20mb-2','426419TVkgml','8875910ieHMtj','max-w-7xl\x20mx-auto\x20px-4\x20sm:px-6\x20lg:px-8','useState','value','System','resolve','push','flex\x20items-center\x20gap-2','ticket_messages_changes','4bNLJAj','text-red-600','[useAuth]\x20Refresh\x20error:','DELETE','[useAuth]\x20Token\x20refreshed\x20successfully','jsxs','Failed\x20to\x20create\x20ticket','messages','assigned_to','Internal','text-2xl\x20font-bold\x20text-gray-900','No\x20ticket\x20ID\x20provided.','animate-spin\x20rounded-full\x20h-12\x20w-12\x20border-b-2\x20border-emerald-600\x20mx-auto','42VdvPLj','78562vWtCDU','w-full\x20px-4\x20py-3\x20border\x20border-gray-300\x20rounded-lg\x20focus:ring-2\x20focus:ring-emerald-500\x20focus:border-transparent\x20resize-none','Failed\x20to\x20escalate\x20ticket:','p-4\x20rounded-lg\x20','signOut','jsx','priority','toUpperCase','autoRefresh','font-semibold\x20text-gray-900','resolved','space-y-3\x20text-sm','bg-blue-50\x20border\x20border-blue-200','channel','ticket_id=eq.','message','Assigned\x20to:','Failed\x20to\x20send\x20message:','webpackChunk_N_E','space-y-4\x20mb-6','useEffect','1460590PYeQwd','329000dbCgAn','1HNOuDw','description','w-full\x20px-4\x20py-2\x20bg-orange-600\x20text-white\x20rounded-lg\x20hover:bg-orange-700\x20disabled:opacity-50','support_tickets_changes','span','api','trim','target','w-full\x20px-4\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700\x20disabled:opacity-50','mt-2\x20text-gray-600','Ticket\x20updated:','Escalate','get','error','/dashboard','568698NEQRKN','2015181phQAxj','catch','bg-blue-100\x20text-blue-800','getUser','button','Ticket\x20created:','support_tickets','INSERT','created_at','postgres_changes','fixed\x20inset-0\x20bg-black\x20bg-opacity-50\x20flex\x20items-center\x20justify-center\x20z-50','is_internal','escalateTicket','ticket','author','text-center','[useAuth]\x20No\x20session\x20returned\x20after\x20refresh','text-xs\x20px-2\x20py-1\x20bg-gray-200\x20rounded','Mark\x20as\x20Resolved','user_role','removeChannel','refreshInterval','getTicket','then','Assign\x20to\x20Me','split','includes','bg-gray-100\x20text-gray-800','â†\x20Back\x20to\x20Tickets','usePathname','Internal\x20note\x20(not\x20visible\x20to\x20user)','font-semibold\x20mb-4','enableRealtime','text-gray-600\x20hover:text-gray-900\x20mb-4\x20flex\x20items-center\x20gap-2'];_0x448e=function(){return _0xe169ad;};return _0x448e();}function _0x4768(_0x221cf5,_0x4e34d9){_0x221cf5=_0x221cf5-0x1ac;const _0x448ece=_0x448e();let _0x47684a=_0x448ece[_0x221cf5];return _0x47684a;}(function(_0x24b1d3,_0x493b61){const _0x30b20d=_0x4768,_0xcdc0dd=_0x24b1d3();while(!![]){try{const _0x463d73=-parseInt(_0x30b20d(0x1bb))/0x1*(-parseInt(_0x30b20d(0x221))/0x2)+-parseInt(_0x30b20d(0x1ca))/0x3*(-parseInt(_0x30b20d(0x213))/0x4)+-parseInt(_0x30b20d(0x1b9))/0x5+-parseInt(_0x30b20d(0x220))/0x6*(parseInt(_0x30b20d(0x209))/0x7)+parseInt(_0x30b20d(0x1ba))/0x8+-parseInt(_0x30b20d(0x1cb))/0x9+parseInt(_0x30b20d(0x20a))/0xa;if(_0x463d73===_0x493b61)break;else _0xcdc0dd['push'](_0xcdc0dd['shift']());}catch(_0x26e1bf){_0xcdc0dd['push'](_0xcdc0dd['shift']());}}}(_0x448e,0x3484d),(self['webpackChunk_N_E']=self[_0x3838b8(0x1b6)]||[])['push']([[0xe1f],{0x165b:(_0x2db40b,_0x5e7e91,_0x42c713)=>{const _0x1bcbc7=_0x3838b8;Promise['resolve']()[_0x1bcbc7(0x1e2)](_0x42c713['bind'](_0x42c713,0xc69c));},0xc541:(_0x32a54b,_0x5d7374,_0x3807a4)=>{'use strict';const _0x3af12d=_0x3838b8;var _0x38fea5=_0x3807a4(0xed0d);_0x3807a4['o'](_0x38fea5,_0x3af12d(0x1e8))&&_0x3807a4['d'](_0x5d7374,{'usePathname':function(){const _0x36ae49=_0x3af12d;return _0x38fea5[_0x36ae49(0x1e8)];}}),_0x3807a4['o'](_0x38fea5,'useRouter')&&_0x3807a4['d'](_0x5d7374,{'useRouter':function(){return _0x38fea5['useRouter'];}}),_0x3807a4['o'](_0x38fea5,_0x3af12d(0x1f3))&&_0x3807a4['d'](_0x5d7374,{'useSearchParams':function(){const _0x316d0f=_0x3af12d;return _0x38fea5[_0x316d0f(0x1f3)];}});},0xc69c:(_0x57af6a,_0xc31b29,_0xfaf6f1)=>{'use strict';_0xfaf6f1['r'](_0xc31b29),_0xfaf6f1['d'](_0xc31b29,{'default':()=>_0x3fa232});var _0x22a47c=_0xfaf6f1(0xd773),_0x241224=_0xfaf6f1(0x5433),_0x27aa3d=_0xfaf6f1(0x10edb),_0x4b0664=_0xfaf6f1(0xc541),_0x158917=_0xfaf6f1(0x14a5a);function _0x3fa232(){const _0x5ee11f=_0x4768;let {user:_0x364b7b,loading:_0x166ee9}=(0x0,_0x27aa3d['A'])(),_0x5589f5=(0x0,_0x4b0664['useRouter'])(),_0x43a621=(0x0,_0x4b0664['useSearchParams'])()[_0x5ee11f(0x1c7)]('id'),{ticket:_0x1be2e8,loading:_0x143a8c,error:_0x49dfb9,refetch:_0x348815}=(0x0,_0x158917['yS'])(_0x43a621||''),{updateTicket:_0x2da275,loading:_0x30907f}=(0x0,_0x158917['tY'])(),{escalateTicket:_0x47758c,loading:_0x703164}=(0x0,_0x158917['oJ'])(),{addMessage:_0x13a161,loading:_0x1b0a62}=(0x0,_0x158917['c0'])(),[_0x2f1260,_0x4523a3]=(0x0,_0x241224['useState'])(''),[_0x4fcad9,_0x19ffa0]=(0x0,_0x241224[_0x5ee11f(0x20c)])(!0x1),[_0x59d639,_0x513fa1]=(0x0,_0x241224['useState'])(!0x1),[_0xa042e8,_0x3f3177]=(0x0,_0x241224[_0x5ee11f(0x20c)])(''),[_0x42d81b,_0x5558df]=(0x0,_0x241224[_0x5ee11f(0x20c)])(null);(0x0,_0x241224[_0x5ee11f(0x1b8)])(()=>{const _0x594fde=_0x5ee11f;_0x166ee9||_0x364b7b?_0x364b7b&&Promise[_0x594fde(0x20f)]()[_0x594fde(0x1e2)](_0xfaf6f1['bind'](_0xfaf6f1,0x3e0d))[_0x594fde(0x1e2)](({api:_0x3e0251})=>{const _0x1f23b7=_0x594fde;_0x3e0251['getProfile']()[_0x1f23b7(0x1e2)](_0x330a40=>{const _0x3d2ba7=_0x1f23b7;_0x5558df(_0x330a40);let _0x50203e=_0x330a40?.['user_role'];_0x330a40&&!['admin',_0x3d2ba7(0x1f9),'support'][_0x3d2ba7(0x1e5)](_0x50203e||'')&&_0x5589f5['push'](_0x3d2ba7(0x1c9));})[_0x1f23b7(0x1cc)](()=>{const _0x16cbc6=_0x1f23b7;_0x5589f5[_0x16cbc6(0x210)]('/dashboard');});}):_0x5589f5['push'](_0x594fde(0x206));},[_0x364b7b,_0x166ee9,_0x5589f5]);let _0x2a46d9=async()=>{const _0x224177=_0x5ee11f;if(_0x2f1260['trim']()&&_0x43a621)try{await _0x13a161({'ticketId':_0x43a621,'message':_0x2f1260,'isInternal':_0x4fcad9}),_0x4523a3(''),_0x19ffa0(!0x1),_0x348815();}catch(_0x5e450a){console[_0x224177(0x1c8)](_0x224177(0x1b5),_0x5e450a);}},_0x44ba2e=async _0x30176b=>{const _0x55007b=_0x5ee11f;if(_0x43a621)try{await _0x2da275({'ticketId':_0x43a621,'status':_0x30176b}),_0x348815();}catch(_0x425900){console[_0x55007b(0x1c8)]('Failed\x20to\x20update\x20status:',_0x425900);}},_0x490fec=async()=>{const _0x17a865=_0x5ee11f;if(_0x42d81b&&_0x43a621)try{await _0x2da275({'ticketId':_0x43a621,'assigned_to':_0x42d81b['id']}),_0x348815();}catch(_0x37f42e){console['error'](_0x17a865(0x205),_0x37f42e);}},_0x25bb1b=async()=>{const _0x359e42=_0x5ee11f;if(_0xa042e8['trim']()&&_0x43a621)try{await _0x47758c({'ticketId':_0x43a621,'reason':_0xa042e8}),_0x513fa1(!0x1),_0x3f3177(''),_0x348815();}catch(_0x20c9ec){console[_0x359e42(0x1c8)](_0x359e42(0x223),_0x20c9ec);}};return _0x43a621?_0x166ee9||_0x143a8c?(0x0,_0x22a47c['jsx'])('div',{'className':'flex\x20items-center\x20justify-center\x20min-h-screen','children':(0x0,_0x22a47c['jsxs'])('div',{'className':_0x5ee11f(0x1da),'children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x202),{'className':_0x5ee11f(0x21f)}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('p',{'className':'mt-4\x20text-gray-600','children':'Loading\x20ticket...'})]})}):_0x49dfb9||!_0x1be2e8?(0x0,_0x22a47c['jsx'])(_0x5ee11f(0x202),{'className':'flex\x20items-center\x20justify-center\x20min-h-screen','children':(0x0,_0x22a47c[_0x5ee11f(0x218)])(_0x5ee11f(0x202),{'className':_0x5ee11f(0x1da),'children':[(0x0,_0x22a47c['jsx'])('p',{'className':_0x5ee11f(0x214),'children':'Failed\x20to\x20load\x20ticket'}),(0x0,_0x22a47c['jsx'])('button',{'onClick':()=>_0x5589f5['push'](_0x5ee11f(0x1f8)),'className':'mt-4\x20text-emerald-600\x20hover:text-emerald-700','children':'Back\x20to\x20Tickets'})]})}):(_0x42d81b?.[_0x5ee11f(0x1de)],(0x0,_0x22a47c['jsxs'])(_0x5ee11f(0x202),{'className':_0x5ee11f(0x1ed),'children':[(0x0,_0x22a47c['jsxs'])('div',{'className':'max-w-7xl\x20mx-auto\x20px-4\x20sm:px-6\x20lg:px-8','children':[(0x0,_0x22a47c['jsxs'])('div',{'className':'mb-6','children':[(0x0,_0x22a47c['jsx'])('button',{'onClick':()=>_0x5589f5['push'](_0x5ee11f(0x1f8)),'className':_0x5ee11f(0x1ec),'children':_0x5ee11f(0x1e7)}),(0x0,_0x22a47c['jsx'])('h1',{'className':'text-3xl\x20font-bold\x20text-gray-900','children':_0x1be2e8['title']})]}),(0x0,_0x22a47c['jsxs'])(_0x5ee11f(0x202),{'className':_0x5ee11f(0x1fe),'children':[(0x0,_0x22a47c[_0x5ee11f(0x218)])(_0x5ee11f(0x202),{'className':'lg:col-span-2\x20space-y-6','children':[(0x0,_0x22a47c['jsxs'])('div',{'className':_0x5ee11f(0x1fb),'children':[(0x0,_0x22a47c[_0x5ee11f(0x218)])(_0x5ee11f(0x202),{'className':'flex\x20items-start\x20justify-between\x20mb-4','children':[(0x0,_0x22a47c[_0x5ee11f(0x218)])('div',{'children':[(0x0,_0x22a47c['jsx'])(_0x5ee11f(0x1bf),{'className':'px-3\x20py-1\x20text-sm\x20font-medium\x20rounded-full\x20'+({'open':'bg-blue-100\x20text-blue-800','in_progress':_0x5ee11f(0x1f7),'waiting_response':'bg-purple-100\x20text-purple-800','escalated':'bg-red-100\x20text-red-800','resolved':'bg-green-100\x20text-green-800','closed':'bg-gray-100\x20text-gray-800'}[_0x1be2e8['status']]||_0x5ee11f(0x1e6)),'children':_0x1be2e8['status']['split']('_')['map'](_0x29b3ff=>_0x29b3ff['charAt'](0x0)[_0x5ee11f(0x228)]()+_0x29b3ff[_0x5ee11f(0x1f0)](0x1))[_0x5ee11f(0x1fa)]('\x20')}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('span',{'className':'ml-2\x20px-3\x20py-1\x20text-sm\x20font-medium\x20rounded-full\x20'+({'low':_0x5ee11f(0x1e6),'medium':_0x5ee11f(0x1cd),'high':'bg-orange-100\x20text-orange-800','urgent':'bg-red-100\x20text-red-800'}[_0x1be2e8['priority']]||'bg-gray-100\x20text-gray-800'),'children':_0x1be2e8[_0x5ee11f(0x227)]})]}),(0x0,_0x22a47c[_0x5ee11f(0x218)])('span',{'className':'text-sm\x20text-gray-500','children':['Created\x20',_0x3a6c63(_0x1be2e8[_0x5ee11f(0x1d3)])]})]}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('p',{'className':'text-gray-700\x20whitespace-pre-wrap','children':_0x1be2e8[_0x5ee11f(0x1bc)]})]}),(0x0,_0x22a47c[_0x5ee11f(0x218)])('div',{'className':_0x5ee11f(0x1fb),'children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])('h2',{'className':'text-xl\x20font-semibold\x20mb-4','children':'Messages'}),(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x202),{'className':_0x5ee11f(0x1b7),'children':_0x1be2e8[_0x5ee11f(0x21a)]['map'](_0x214459=>(0x0,_0x22a47c['jsxs'])('div',{'className':_0x5ee11f(0x224)+(_0x214459['is_internal']?'bg-yellow-50\x20border\x20border-yellow-200':_0x214459['is_system']?'bg-gray-50\x20border\x20border-gray-200':_0x5ee11f(0x1b0)),'children':[(0x0,_0x22a47c['jsxs'])('div',{'className':_0x5ee11f(0x208),'children':[(0x0,_0x22a47c[_0x5ee11f(0x218)])('div',{'className':_0x5ee11f(0x211),'children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x1bf),{'className':_0x5ee11f(0x1ad),'children':_0x214459['author']?.['display_name']||_0x5ee11f(0x20e)}),_0x214459[_0x5ee11f(0x1d9)]&&(0x0,_0x22a47c['jsx'])(_0x5ee11f(0x1bf),{'className':_0x5ee11f(0x1dc),'children':_0x214459['author']['user_role']}),_0x214459[_0x5ee11f(0x1d6)]&&(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x1bf),{'className':'text-xs\x20px-2\x20py-1\x20bg-yellow-200\x20rounded','children':_0x5ee11f(0x21c)})]}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('span',{'className':'text-xs\x20text-gray-500','children':_0x3a6c63(_0x214459[_0x5ee11f(0x1d3)])})]}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('p',{'className':'text-gray-700\x20whitespace-pre-wrap','children':_0x214459['message']})]},_0x214459['id']))}),(0x0,_0x22a47c[_0x5ee11f(0x218)])('div',{'className':'border-t\x20pt-4','children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])('textarea',{'value':_0x2f1260,'onChange':_0x35b163=>_0x4523a3(_0x35b163['target']['value']),'placeholder':'Type\x20your\x20message...','className':_0x5ee11f(0x222),'rows':0x4}),(0x0,_0x22a47c[_0x5ee11f(0x218)])('div',{'className':_0x5ee11f(0x1ee),'children':[(0x0,_0x22a47c['jsxs'])('label',{'className':'flex\x20items-center\x20gap-2','children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])('input',{'type':_0x5ee11f(0x203),'checked':_0x4fcad9,'onChange':_0x5bf934=>_0x19ffa0(_0x5bf934[_0x5ee11f(0x1c2)][_0x5ee11f(0x1ef)]),'className':'rounded\x20border-gray-300\x20text-emerald-600\x20focus:ring-emerald-500'}),(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x1bf),{'className':_0x5ee11f(0x207),'children':_0x5ee11f(0x1e9)})]}),(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x1cf),{'onClick':_0x2a46d9,'disabled':_0x1b0a62||!_0x2f1260[_0x5ee11f(0x1c1)](),'className':'px-6\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700\x20disabled:opacity-50\x20disabled:cursor-not-allowed','children':_0x1b0a62?'Sending...':'Send\x20Message'})]})]})]})]}),(0x0,_0x22a47c[_0x5ee11f(0x218)])(_0x5ee11f(0x202),{'className':'space-y-6','children':[(0x0,_0x22a47c[_0x5ee11f(0x218)])('div',{'className':'bg-white\x20rounded-lg\x20shadow-md\x20p-6','children':[(0x0,_0x22a47c['jsx'])('h3',{'className':_0x5ee11f(0x1ea),'children':'Actions'}),(0x0,_0x22a47c[_0x5ee11f(0x218)])('div',{'className':'space-y-3','children':[!_0x1be2e8['assigned_to']&&(0x0,_0x22a47c['jsx'])('button',{'onClick':_0x490fec,'disabled':_0x30907f,'className':_0x5ee11f(0x1c3),'children':_0x5ee11f(0x1e3)}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('button',{'onClick':()=>_0x513fa1(!0x0),'disabled':_0x703164||_0x1be2e8[_0x5ee11f(0x1ff)]>=0x3,'className':_0x5ee11f(0x1bd),'children':_0x5ee11f(0x201)}),'resolved'!==_0x1be2e8['status']&&(0x0,_0x22a47c['jsx'])(_0x5ee11f(0x1cf),{'onClick':()=>_0x44ba2e(_0x5ee11f(0x1ae)),'disabled':_0x30907f,'className':_0x5ee11f(0x1f2),'children':_0x5ee11f(0x1dd)})]})]}),(0x0,_0x22a47c['jsxs'])('div',{'className':'bg-white\x20rounded-lg\x20shadow-md\x20p-6','children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])('h3',{'className':_0x5ee11f(0x1ea),'children':'Ticket\x20Information'}),(0x0,_0x22a47c['jsxs'])('div',{'className':_0x5ee11f(0x1af),'children':[(0x0,_0x22a47c['jsxs'])('div',{'children':[(0x0,_0x22a47c['jsx'])('span',{'className':'text-gray-600','children':'Category:'}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('span',{'className':'ml-2\x20font-medium','children':_0x1be2e8['category'][_0x5ee11f(0x1e4)]('_')['map'](_0x677d35=>_0x677d35['charAt'](0x0)['toUpperCase']()+_0x677d35['slice'](0x1))[_0x5ee11f(0x1fa)]('\x20')})]}),(0x0,_0x22a47c[_0x5ee11f(0x218)])(_0x5ee11f(0x202),{'children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])('span',{'className':_0x5ee11f(0x1f1),'children':_0x5ee11f(0x1f5)}),(0x0,_0x22a47c['jsx'])(_0x5ee11f(0x1bf),{'className':'ml-2\x20font-medium','children':_0x1be2e8['user']?.['display_name']})]}),_0x1be2e8[_0x5ee11f(0x21b)]&&(0x0,_0x22a47c[_0x5ee11f(0x218)])('div',{'children':[(0x0,_0x22a47c['jsx'])('span',{'className':_0x5ee11f(0x1f1),'children':_0x5ee11f(0x1b4)}),(0x0,_0x22a47c['jsx'])(_0x5ee11f(0x1bf),{'className':'ml-2\x20font-medium','children':_0x1be2e8['assignee']?.['display_name']})]}),(0x0,_0x22a47c['jsxs'])('div',{'children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])('span',{'className':'text-gray-600','children':'Escalation\x20Level:'}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('span',{'className':'ml-2\x20font-medium','children':_0x1be2e8['escalation_level']})]})]})]})]})]})]}),_0x59d639&&(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x202),{'className':_0x5ee11f(0x1d5),'children':(0x0,_0x22a47c[_0x5ee11f(0x218)])(_0x5ee11f(0x202),{'className':_0x5ee11f(0x1f4),'children':[(0x0,_0x22a47c['jsx'])('h3',{'className':'text-xl\x20font-semibold\x20mb-4','children':_0x5ee11f(0x201)}),(0x0,_0x22a47c['jsx'])('textarea',{'value':_0xa042e8,'onChange':_0x12100f=>_0x3f3177(_0x12100f[_0x5ee11f(0x1c2)][_0x5ee11f(0x20d)]),'placeholder':'Reason\x20for\x20escalation...','className':_0x5ee11f(0x222),'rows':0x4}),(0x0,_0x22a47c['jsxs'])('div',{'className':'flex\x20gap-3\x20mt-4','children':[(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x1cf),{'onClick':()=>_0x513fa1(!0x1),'className':'flex-1\x20px-4\x20py-2\x20border\x20border-gray-300\x20rounded-lg\x20hover:bg-gray-50','children':'Cancel'}),(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x1cf),{'onClick':_0x25bb1b,'disabled':!_0xa042e8[_0x5ee11f(0x1c1)]()||_0x703164,'className':'flex-1\x20px-4\x20py-2\x20bg-orange-600\x20text-white\x20rounded-lg\x20hover:bg-orange-700\x20disabled:opacity-50','children':_0x703164?'Escalating...':_0x5ee11f(0x1c6)})]})]})})]})):(0x0,_0x22a47c[_0x5ee11f(0x226)])('div',{'className':_0x5ee11f(0x1ed),'children':(0x0,_0x22a47c[_0x5ee11f(0x226)])(_0x5ee11f(0x202),{'className':_0x5ee11f(0x20b),'children':(0x0,_0x22a47c[_0x5ee11f(0x218)])(_0x5ee11f(0x202),{'className':'text-center','children':[(0x0,_0x22a47c['jsx'])('h2',{'className':_0x5ee11f(0x21d),'children':'Ticket\x20Not\x20Found'}),(0x0,_0x22a47c[_0x5ee11f(0x226)])('p',{'className':_0x5ee11f(0x1c4),'children':_0x5ee11f(0x21e)}),(0x0,_0x22a47c['jsx'])(_0x5ee11f(0x1cf),{'onClick':()=>_0x5589f5[_0x5ee11f(0x210)]('/admin/tickets'),'className':'mt-4\x20px-4\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700','children':'Back\x20to\x20Tickets'})]})})});}function _0x3a6c63(_0x54b930){return new Date(_0x54b930)['toLocaleString']();}},0x10edb:(_0x5f2948,_0x4da7b7,_0x38a97d)=>{'use strict';_0x38a97d['d'](_0x4da7b7,{'A':()=>_0x15d0f8});var _0x390edb=_0x38a97d(0x5433),_0x3be6ee=_0x38a97d(0x3e0d);function _0x15d0f8(){const _0x451fd7=_0x4768;let [_0x330db6,_0x174fcf]=(0x0,_0x390edb[_0x451fd7(0x20c)])(null),[_0x3afdea,_0x2caf58]=(0x0,_0x390edb['useState'])(!0x0),[_0x18006d,_0x1f8455]=(0x0,_0x390edb[_0x451fd7(0x20c)])(!0x1),[_0x377e98,_0x4a815d]=(0x0,_0x390edb[_0x451fd7(0x20c)])(null),_0x5c5f89=(0x0,_0x390edb['useCallback'])(async()=>{const _0x3490e6=_0x451fd7;try{let _0x3e99ed=(0x0,_0x3be6ee['getSupabase'])(),{data:_0x2fa1a4,error:_0x4c7244}=await _0x3e99ed['auth']['refreshSession']();if(_0x4c7244)return console['error'](_0x3490e6(0x215),_0x4c7244),!0x1;if(!_0x2fa1a4?.[_0x3490e6(0x204)])return console[_0x3490e6(0x1c8)](_0x3490e6(0x1db)),!0x1;return _0x4a815d(_0x2fa1a4[_0x3490e6(0x204)]),_0x174fcf(_0x2fa1a4[_0x3490e6(0x204)]['user']),console['log']('[useAuth]\x20Session\x20refreshed\x20successfully'),!0x0;}catch(_0x56cc1f){return console[_0x3490e6(0x1c8)]('[useAuth]\x20Failed\x20to\x20refresh:',_0x56cc1f),!0x1;}},[]);return(0x0,_0x390edb['useEffect'])(()=>{const _0x48b785=_0x451fd7;_0x3be6ee['api'][_0x48b785(0x1ce)]()[_0x48b785(0x1e2)](({data:{user:_0x2ef9bf}})=>{_0x174fcf(_0x2ef9bf),_0x2caf58(!0x1),_0x1f8455(!0x0);})['catch'](()=>{_0x2caf58(!0x1),_0x1f8455(!0x0);});let {data:{subscription:_0x51aa7e}}=_0x3be6ee['api'][_0x48b785(0x1fc)](async(_0x25b27a,_0x5a6ca6)=>{const _0x531dfb=_0x48b785;console[_0x531dfb(0x1f6)]('[useAuth]\x20Auth\x20state\x20change:',_0x25b27a),'TOKEN_REFRESHED'===_0x25b27a&&console['log'](_0x531dfb(0x217)),_0x4a815d(_0x5a6ca6),_0x174fcf(_0x5a6ca6?.['user']??null),_0x2caf58(!0x1),_0x1f8455(!0x0);});return()=>_0x51aa7e['unsubscribe']();},[]),{'user':_0x330db6,'session':_0x377e98,'loading':_0x3afdea,'isReady':_0x18006d,'authenticated':!!_0x330db6,'refreshSession':_0x5c5f89,'signOut':()=>_0x3be6ee['api'][_0x451fd7(0x225)]()};}},0x14a5a:(_0x1e7c04,_0x22373e,_0x57c874)=>{'use strict';_0x57c874['d'](_0x22373e,{'c0':()=>_0x73e39f,'Gs':()=>_0x52327f,'oJ':()=>_0x46d255,'yS':()=>_0x29229b,'dS':()=>_0x17159f,'tY':()=>_0x5c0ff2});var _0x15baaf=_0x57c874(0x5433),_0x5c7713=_0x57c874(0x3e0d);function _0x7b18ea(_0x4d016f={}){let {onTicketCreated:_0x295e0f,onTicketUpdated:_0x4fe1c0,onTicketDeleted:_0x32313a,onMessageAdded:_0xf99625,ticketId:_0x189160}=_0x4d016f;(0x0,_0x15baaf['useEffect'])(()=>{const _0x2d674=_0x4768;let _0x24db91=(0x0,_0x5c7713['getSupabase'])(),_0x155608=_0x24db91[_0x2d674(0x1b1)](_0x2d674(0x1be))['on'](_0x2d674(0x1d4),{'event':_0x2d674(0x1d2),'schema':_0x2d674(0x1c0),'table':_0x2d674(0x1d1)},_0x19ffff=>{const _0xe51a1e=_0x2d674;console['log'](_0xe51a1e(0x1d0),_0x19ffff),_0x295e0f?.(_0x19ffff);})['on'](_0x2d674(0x1d4),{'event':'UPDATE','schema':_0x2d674(0x1c0),'table':'support_tickets',..._0x189160?{'filter':'id=eq.'+_0x189160}:{}},_0x44b638=>{const _0x18d163=_0x2d674;console['log'](_0x18d163(0x1c5),_0x44b638),_0x4fe1c0?.(_0x44b638);})['on'](_0x2d674(0x1d4),{'event':_0x2d674(0x216),'schema':'api','table':'support_tickets'},_0x1bba60=>{console['log']('Ticket\x20deleted:',_0x1bba60),_0x32313a?.(_0x1bba60);})['subscribe'](),_0x8b23cc=null;return _0x189160&&_0xf99625&&(_0x8b23cc=_0x24db91[_0x2d674(0x1b1)](_0x2d674(0x212))['on']('postgres_changes',{'event':_0x2d674(0x1d2),'schema':'api','table':'ticket_messages','filter':_0x2d674(0x1b2)+_0x189160},_0x5e968d=>{const _0x2ff237=_0x2d674;console[_0x2ff237(0x1f6)]('Message\x20added:',_0x5e968d),_0xf99625(_0x5e968d);})['subscribe']()),()=>{const _0xce8240=_0x2d674;_0x24db91[_0xce8240(0x1df)](_0x155608),_0x8b23cc&&_0x24db91[_0xce8240(0x1df)](_0x8b23cc);};},[_0x295e0f,_0x4fe1c0,_0x32313a,_0xf99625,_0x189160]);}function _0x17159f(_0x34f7dc={}){const _0x328374=_0x4768;let [_0xade1c,_0x4bf602]=(0x0,_0x15baaf['useState'])([]),[_0x1e0d31,_0x521030]=(0x0,_0x15baaf['useState'])(!0x0),[_0x45a6ef,_0x167ab7]=(0x0,_0x15baaf['useState'])(null),[_0x3549f1,_0x4a5d0a]=(0x0,_0x15baaf['useState'])(0x0),_0x3f378f=(0x0,_0x15baaf['useCallback'])(async()=>{const _0x23a0a3=_0x4768;try{_0x521030(!0x0),_0x167ab7(null);let {tickets:_0x194943,total:_0x3cdf52}=await _0x5c7713['api']['getTickets']({'status':_0x34f7dc['status'],'category':_0x34f7dc[_0x23a0a3(0x1fd)],'assigned_to':_0x34f7dc[_0x23a0a3(0x21b)]});_0x4bf602(_0x194943),_0x4a5d0a(_0x3cdf52);}catch(_0x32a4a0){_0x167ab7(_0x32a4a0 instanceof Error?_0x32a4a0['message']:'Failed\x20to\x20fetch\x20tickets');}finally{_0x521030(!0x1);}},[_0x34f7dc['status'],_0x34f7dc['category'],_0x34f7dc['assigned_to']]);return(0x0,_0x15baaf['useEffect'])(()=>{if(_0x3f378f(),_0x34f7dc['autoRefresh']&&_0x34f7dc['refreshInterval']){let _0x1fcf13=setInterval(_0x3f378f,_0x34f7dc['refreshInterval']);return()=>clearInterval(_0x1fcf13);}},[_0x3f378f,_0x34f7dc[_0x328374(0x1ac)],_0x34f7dc[_0x328374(0x1e0)]]),_0x7b18ea({'onTicketCreated':!0x1!==_0x34f7dc['enableRealtime']?()=>_0x3f378f():void 0x0,'onTicketUpdated':!0x1!==_0x34f7dc[_0x328374(0x1eb)]?()=>_0x3f378f():void 0x0,'onTicketDeleted':!0x1!==_0x34f7dc[_0x328374(0x1eb)]?()=>_0x3f378f():void 0x0}),{'tickets':_0xade1c,'loading':_0x1e0d31,'error':_0x45a6ef,'total':_0x3549f1,'refetch':_0x3f378f};}function _0x29229b(_0x1230d4,_0x21bb08=!0x0){const _0x15a92d=_0x4768;let [_0x4f22cb,_0xa3bb3e]=(0x0,_0x15baaf['useState'])(null),[_0x15fa82,_0x2c2ba8]=(0x0,_0x15baaf[_0x15a92d(0x20c)])(!0x0),[_0x436445,_0x10501c]=(0x0,_0x15baaf[_0x15a92d(0x20c)])(null),_0x2d7b32=(0x0,_0x15baaf['useCallback'])(async()=>{const _0x2d7320=_0x15a92d;if(!_0x1230d4){_0xa3bb3e(null),_0x2c2ba8(!0x1);return;}try{_0x2c2ba8(!0x0),_0x10501c(null);let _0x1a2578=await _0x5c7713['api'][_0x2d7320(0x1e1)](_0x1230d4);_0xa3bb3e(_0x1a2578);}catch(_0x4fb1a3){_0x10501c(_0x4fb1a3 instanceof Error?_0x4fb1a3[_0x2d7320(0x1b3)]:'Failed\x20to\x20fetch\x20ticket');}finally{_0x2c2ba8(!0x1);}},[_0x1230d4]);return(0x0,_0x15baaf[_0x15a92d(0x1b8)])(()=>{_0x2d7b32();},[_0x2d7b32]),_0x7b18ea({'ticketId':_0x1230d4||void 0x0,'onTicketUpdated':_0x21bb08?()=>_0x2d7b32():void 0x0,'onMessageAdded':_0x21bb08?()=>_0x2d7b32():void 0x0}),{'ticket':_0x4f22cb,'loading':_0x15fa82,'error':_0x436445,'refetch':_0x2d7b32};}function _0x52327f(){const _0x458ea9=_0x4768;let [_0xbf7c09,_0x1b8154]=(0x0,_0x15baaf[_0x458ea9(0x20c)])(!0x1),[_0x42e6b3,_0x5acde0]=(0x0,_0x15baaf['useState'])(null);return{'createTicket':async _0xf0c5b1=>{const _0x9dc502=_0x458ea9;try{return _0x1b8154(!0x0),_0x5acde0(null),(await _0x5c7713[_0x9dc502(0x1c0)][_0x9dc502(0x200)](_0xf0c5b1))[_0x9dc502(0x1d8)];}catch(_0x1667e2){let _0x563eba=_0x1667e2 instanceof Error?_0x1667e2['message']:_0x9dc502(0x219);throw _0x5acde0(_0x563eba),Error(_0x563eba);}finally{_0x1b8154(!0x1);}},'loading':_0xbf7c09,'error':_0x42e6b3};}function _0x5c0ff2(){const _0x35f1a8=_0x4768;let [_0x5dd532,_0x46d58e]=(0x0,_0x15baaf['useState'])(!0x1),[_0x57f883,_0x1f0865]=(0x0,_0x15baaf[_0x35f1a8(0x20c)])(null);return{'updateTicket':async _0x35b615=>{const _0x5cc05d=_0x35f1a8;try{return _0x46d58e(!0x0),_0x1f0865(null),(await _0x5c7713[_0x5cc05d(0x1c0)]['updateTicket'](_0x35b615))['ticket'];}catch(_0x20f82d){let _0x302016=_0x20f82d instanceof Error?_0x20f82d[_0x5cc05d(0x1b3)]:'Failed\x20to\x20update\x20ticket';throw _0x1f0865(_0x302016),Error(_0x302016);}finally{_0x46d58e(!0x1);}},'loading':_0x5dd532,'error':_0x57f883};}function _0x46d255(){const _0x3d38f4=_0x4768;let [_0x5b92ae,_0x57d82f]=(0x0,_0x15baaf[_0x3d38f4(0x20c)])(!0x1),[_0x22cd60,_0x2225f3]=(0x0,_0x15baaf['useState'])(null);return{'escalateTicket':async _0x21f42=>{const _0x3d572f=_0x3d38f4;try{return _0x57d82f(!0x0),_0x2225f3(null),(await _0x5c7713['api'][_0x3d572f(0x1d7)](_0x21f42))['ticket'];}catch(_0x16ef6e){let _0x15ff97=_0x16ef6e instanceof Error?_0x16ef6e[_0x3d572f(0x1b3)]:'Failed\x20to\x20escalate\x20ticket';throw _0x2225f3(_0x15ff97),Error(_0x15ff97);}finally{_0x57d82f(!0x1);}},'loading':_0x5b92ae,'error':_0x22cd60};}function _0x73e39f(){const _0x39c54d=_0x4768;let [_0x41c12b,_0x43fdf4]=(0x0,_0x15baaf['useState'])(!0x1),[_0x533709,_0x46e3b5]=(0x0,_0x15baaf[_0x39c54d(0x20c)])(null);return{'addMessage':async _0x1c9bb5=>{const _0x6def9f=_0x39c54d;try{return _0x43fdf4(!0x0),_0x46e3b5(null),(await _0x5c7713[_0x6def9f(0x1c0)]['addTicketMessage'](_0x1c9bb5))[_0x6def9f(0x1b3)];}catch(_0x4e55ac){let _0x2feef5=_0x4e55ac instanceof Error?_0x4e55ac['message']:'Failed\x20to\x20add\x20message';throw _0x46e3b5(_0x2feef5),Error(_0x2feef5);}finally{_0x43fdf4(!0x1);}},'loading':_0x41c12b,'error':_0x533709};}}},_0x4622f2=>{_0x4622f2['O'](0x0,[0x2603,0x259f,0x16fd,0x1b1b,0x492,0x1cbe],()=>_0x4622f2(_0x4622f2['s']=0x165b)),_N_E=_0x4622f2['O']();}]));