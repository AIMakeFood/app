const _0x3ebb49=_0x1546;function _0x304a(){const _0x3114ef=['[useAuth]\x20Auth\x20state\x20change:','3274972QYfhVv','session','INSERT','div','resolve','Back\x20to\x20Tickets','User:','assignee','message','Ticket\x20updated:','Type\x20your\x20message...','w-full\x20px-4\x20py-2\x20bg-orange-600\x20text-white\x20rounded-lg\x20hover:bg-orange-700\x20disabled:opacity-50','usePathname','Failed\x20to\x20add\x20message','text-2xl\x20font-bold\x20text-gray-900','channel','Failed\x20to\x20send\x20message:','text-xl\x20font-semibold\x20mb-4','Assigned\x20to:','5LoEvIg','Actions','includes','598964XAzaDw','push','value','text-gray-600','space-y-4\x20mb-6','w-full\x20px-4\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700\x20disabled:opacity-50','ml-2\x20px-3\x20py-1\x20text-sm\x20font-medium\x20rounded-full\x20','TOKEN_REFRESHED','autoRefresh','grid\x20grid-cols-1\x20lg:grid-cols-3\x20gap-6','Failed\x20to\x20update\x20status:','Escalate\x20Ticket','ticket_messages','bind','jsx','Failed\x20to\x20escalate\x20ticket','unsubscribe','Failed\x20to\x20create\x20ticket','getSupabase','[useAuth]\x20Session\x20refreshed\x20successfully','Cancel','Ticket\x20Not\x20Found','removeChannel','onAuthStateChange','Failed\x20to\x20assign\x20ticket:','subscribe','space-y-3','Failed\x20to\x20update\x20ticket','Ticket\x20Information','â†\x20Back\x20to\x20Tickets','w-full\x20px-4\x20py-2\x20bg-green-600\x20text-white\x20rounded-lg\x20hover:bg-green-700\x20disabled:opacity-50','useCallback','signOut','bg-green-100\x20text-green-800','catch','messages','Failed\x20to\x20fetch\x20tickets','ml-2\x20font-medium','enableRealtime','flex\x20items-start\x20justify-between\x20mb-4','join','text-gray-700\x20whitespace-pre-wrap','status','Loading\x20ticket...','bg-yellow-50\x20border\x20border-yellow-200','border-t\x20pt-4','text-xs\x20px-2\x20py-1\x20bg-yellow-200\x20rounded','Assign\x20to\x20Me','DELETE','useState','93488gfTJuM','UPDATE','webpackChunk_N_E','author','flex\x20items-center\x20gap-2','/admin/tickets','text-3xl\x20font-bold\x20text-gray-900','2362344UKyxcK','useRouter','assigned_to','Failed\x20to\x20escalate\x20ticket:','16297776KlwEgH','jsxs','2870256GjZUnI','span','Messages','target','Mark\x20as\x20Resolved','resolved','Category:','display_name','postgres_changes','escalation_level','Created\x20','manager','log','is_system','refreshInterval','333120HAlWKS','14yIZkgx','bg-red-100\x20text-red-800','is_internal','error','bg-white\x20rounded-lg\x20shadow-md\x20p-6','api','font-semibold\x20text-gray-900','checked','label','Sending...','w-full\x20px-4\x20py-3\x20border\x20border-gray-300\x20rounded-lg\x20focus:ring-2\x20focus:ring-emerald-500\x20focus:border-transparent\x20resize-none','bg-gray-100\x20text-gray-800','map','then','bg-gray-50\x20border\x20border-gray-200','font-semibold\x20mb-4','slice','bg-yellow-100\x20text-yellow-800','user_role','/dashboard','title','text-center','ticket_messages_changes','button','flex-1\x20px-4\x20py-2\x20border\x20border-gray-300\x20rounded-lg\x20hover:bg-gray-50','addTicketMessage','category','useEffect','lg:col-span-2\x20space-y-6','Ticket\x20deleted:','mb-6','space-y-6','mt-4\x20text-emerald-600\x20hover:text-emerald-700','ticket','id=eq.','support_tickets_changes','flex\x20items-start\x20justify-between\x20mb-2','Send\x20Message'];_0x304a=function(){return _0x3114ef;};return _0x304a();}function _0x1546(_0x5ccb7b,_0x3504a7){_0x5ccb7b=_0x5ccb7b-0x161;const _0x304a71=_0x304a();let _0x154632=_0x304a71[_0x5ccb7b];return _0x154632;}(function(_0x3486d4,_0x50fd13){const _0x23c640=_0x1546,_0x4617d9=_0x3486d4();while(!![]){try{const _0x367299=parseInt(_0x23c640(0x18f))/0x1+parseInt(_0x23c640(0x1e9))/0x2+parseInt(_0x23c640(0x1ab))/0x3+-parseInt(_0x23c640(0x1d3))/0x4*(parseInt(_0x23c640(0x1e6))/0x5)+-parseInt(_0x23c640(0x19c))/0x6+-parseInt(_0x23c640(0x1ac))/0x7*(parseInt(_0x23c640(0x196))/0x8)+parseInt(_0x23c640(0x19a))/0x9;if(_0x367299===_0x50fd13)break;else _0x4617d9['push'](_0x4617d9['shift']());}catch(_0x37484e){_0x4617d9['push'](_0x4617d9['shift']());}}}(_0x304a,0x684a1),(self[_0x3ebb49(0x191)]=self['webpackChunk_N_E']||[])['push']([[0xe1f],{0x165b:(_0x417ce7,_0x42faec,_0x3966ef)=>{const _0x1bb09d=_0x3ebb49;Promise[_0x1bb09d(0x1d7)]()[_0x1bb09d(0x1b9)](_0x3966ef[_0x1bb09d(0x16a)](_0x3966ef,0xc69c));},0xc541:(_0x2829bd,_0x422387,_0x36c070)=>{'use strict';const _0x33925f=_0x3ebb49;var _0x8c2e4d=_0x36c070(0xed0d);_0x36c070['o'](_0x8c2e4d,_0x33925f(0x1df))&&_0x36c070['d'](_0x422387,{'usePathname':function(){return _0x8c2e4d['usePathname'];}}),_0x36c070['o'](_0x8c2e4d,'useRouter')&&_0x36c070['d'](_0x422387,{'useRouter':function(){const _0x36b1de=_0x33925f;return _0x8c2e4d[_0x36b1de(0x197)];}}),_0x36c070['o'](_0x8c2e4d,'useSearchParams')&&_0x36c070['d'](_0x422387,{'useSearchParams':function(){return _0x8c2e4d['useSearchParams'];}});},0xc69c:(_0x3c6bc2,_0x3fcb25,_0x562485)=>{'use strict';_0x562485['r'](_0x3fcb25),_0x562485['d'](_0x3fcb25,{'default':()=>_0x45c2ce});var _0x463ecc=_0x562485(0xd773),_0x33f313=_0x562485(0x5433),_0x248e28=_0x562485(0x10edb),_0x18fbc1=_0x562485(0xc541),_0x1d71af=_0x562485(0x14a5a);function _0x45c2ce(){const _0x23d9d9=_0x1546;let {user:_0x25b741,loading:_0xba4155}=(0x0,_0x248e28['A'])(),_0x2993b8=(0x0,_0x18fbc1['useRouter'])(),_0x4329b1=(0x0,_0x18fbc1['useSearchParams'])()['get']('id'),{ticket:_0x21bd51,loading:_0x4f45b7,error:_0x4df165,refetch:_0x570e96}=(0x0,_0x1d71af['yS'])(_0x4329b1||''),{updateTicket:_0x1f0069,loading:_0x10c33d}=(0x0,_0x1d71af['tY'])(),{escalateTicket:_0x4b252d,loading:_0x588bc9}=(0x0,_0x1d71af['oJ'])(),{addMessage:_0x31ca6d,loading:_0x413072}=(0x0,_0x1d71af['c0'])(),[_0x2a1de5,_0x5cf5bf]=(0x0,_0x33f313['useState'])(''),[_0x16909f,_0x2b6f7]=(0x0,_0x33f313['useState'])(!0x1),[_0x8caa53,_0x1e0fea]=(0x0,_0x33f313['useState'])(!0x1),[_0xa9e0da,_0x1876bb]=(0x0,_0x33f313[_0x23d9d9(0x18e)])(''),[_0x58d47b,_0x28c7fa]=(0x0,_0x33f313['useState'])(null);(0x0,_0x33f313[_0x23d9d9(0x1c7)])(()=>{const _0x1358a4=_0x23d9d9;_0xba4155||_0x25b741?_0x25b741&&Promise[_0x1358a4(0x1d7)]()['then'](_0x562485[_0x1358a4(0x16a)](_0x562485,0x3e0d))[_0x1358a4(0x1b9)](({api:_0xc77c78})=>{const _0x4b4a54=_0x1358a4;_0xc77c78['getProfile']()['then'](_0xc310d1=>{const _0x269a2c=_0x1546;_0x28c7fa(_0xc310d1);let _0x154bdd=_0xc310d1?.['user_role'];_0xc310d1&&!['admin',_0x269a2c(0x1a7),'support'][_0x269a2c(0x1e8)](_0x154bdd||'')&&_0x2993b8[_0x269a2c(0x1ea)](_0x269a2c(0x1bf));})[_0x4b4a54(0x17f)](()=>{const _0x1c1e07=_0x4b4a54;_0x2993b8['push'](_0x1c1e07(0x1bf));});}):_0x2993b8[_0x1358a4(0x1ea)]('/auth/login');},[_0x25b741,_0xba4155,_0x2993b8]);let _0x5f2c12=async()=>{const _0x33a4cb=_0x23d9d9;if(_0x2a1de5['trim']()&&_0x4329b1)try{await _0x31ca6d({'ticketId':_0x4329b1,'message':_0x2a1de5,'isInternal':_0x16909f}),_0x5cf5bf(''),_0x2b6f7(!0x1),_0x570e96();}catch(_0x8c6cc0){console['error'](_0x33a4cb(0x1e3),_0x8c6cc0);}},_0x19d8fa=async _0x143a22=>{const _0x5ca745=_0x23d9d9;if(_0x4329b1)try{await _0x1f0069({'ticketId':_0x4329b1,'status':_0x143a22}),_0x570e96();}catch(_0x5e7e65){console['error'](_0x5ca745(0x167),_0x5e7e65);}},_0x3cd7a2=async()=>{const _0x25b05d=_0x23d9d9;if(_0x58d47b&&_0x4329b1)try{await _0x1f0069({'ticketId':_0x4329b1,'assigned_to':_0x58d47b['id']}),_0x570e96();}catch(_0x3d27c4){console['error'](_0x25b05d(0x175),_0x3d27c4);}},_0x24864a=async()=>{const _0x18b637=_0x23d9d9;if(_0xa9e0da['trim']()&&_0x4329b1)try{await _0x4b252d({'ticketId':_0x4329b1,'reason':_0xa9e0da}),_0x1e0fea(!0x1),_0x1876bb(''),_0x570e96();}catch(_0x3634f5){console['error'](_0x18b637(0x199),_0x3634f5);}};return _0x4329b1?_0xba4155||_0x4f45b7?(0x0,_0x463ecc[_0x23d9d9(0x16b)])('div',{'className':'flex\x20items-center\x20justify-center\x20min-h-screen','children':(0x0,_0x463ecc[_0x23d9d9(0x19b)])('div',{'className':'text-center','children':[(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x1d6),{'className':'animate-spin\x20rounded-full\x20h-12\x20w-12\x20border-b-2\x20border-emerald-600\x20mx-auto'}),(0x0,_0x463ecc['jsx'])('p',{'className':'mt-4\x20text-gray-600','children':_0x23d9d9(0x188)})]})}):_0x4df165||!_0x21bd51?(0x0,_0x463ecc[_0x23d9d9(0x16b)])('div',{'className':'flex\x20items-center\x20justify-center\x20min-h-screen','children':(0x0,_0x463ecc['jsxs'])(_0x23d9d9(0x1d6),{'className':_0x23d9d9(0x1c1),'children':[(0x0,_0x463ecc[_0x23d9d9(0x16b)])('p',{'className':'text-red-600','children':'Failed\x20to\x20load\x20ticket'}),(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x1c3),{'onClick':()=>_0x2993b8[_0x23d9d9(0x1ea)]('/admin/tickets'),'className':_0x23d9d9(0x1cc),'children':_0x23d9d9(0x1d8)})]})}):(_0x58d47b?.[_0x23d9d9(0x1be)],(0x0,_0x463ecc['jsxs'])('div',{'className':'min-h-screen\x20bg-gray-50\x20py-8','children':[(0x0,_0x463ecc[_0x23d9d9(0x19b)])('div',{'className':'max-w-7xl\x20mx-auto\x20px-4\x20sm:px-6\x20lg:px-8','children':[(0x0,_0x463ecc[_0x23d9d9(0x19b)])('div',{'className':_0x23d9d9(0x1ca),'children':[(0x0,_0x463ecc[_0x23d9d9(0x16b)])('button',{'onClick':()=>_0x2993b8['push'](_0x23d9d9(0x194)),'className':'text-gray-600\x20hover:text-gray-900\x20mb-4\x20flex\x20items-center\x20gap-2','children':_0x23d9d9(0x17a)}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('h1',{'className':_0x23d9d9(0x195),'children':_0x21bd51[_0x23d9d9(0x1c0)]})]}),(0x0,_0x463ecc['jsxs'])(_0x23d9d9(0x1d6),{'className':_0x23d9d9(0x166),'children':[(0x0,_0x463ecc[_0x23d9d9(0x19b)])(_0x23d9d9(0x1d6),{'className':_0x23d9d9(0x1c8),'children':[(0x0,_0x463ecc['jsxs'])('div',{'className':_0x23d9d9(0x1b0),'children':[(0x0,_0x463ecc['jsxs'])('div',{'className':_0x23d9d9(0x184),'children':[(0x0,_0x463ecc['jsxs'])('div',{'children':[(0x0,_0x463ecc[_0x23d9d9(0x16b)])('span',{'className':'px-3\x20py-1\x20text-sm\x20font-medium\x20rounded-full\x20'+({'open':'bg-blue-100\x20text-blue-800','in_progress':_0x23d9d9(0x1bd),'waiting_response':'bg-purple-100\x20text-purple-800','escalated':'bg-red-100\x20text-red-800','resolved':_0x23d9d9(0x17e),'closed':'bg-gray-100\x20text-gray-800'}[_0x21bd51[_0x23d9d9(0x187)]]||'bg-gray-100\x20text-gray-800'),'children':_0x21bd51[_0x23d9d9(0x187)]['split']('_')['map'](_0x35d8c8=>_0x35d8c8['charAt'](0x0)['toUpperCase']()+_0x35d8c8[_0x23d9d9(0x1bc)](0x1))[_0x23d9d9(0x185)]('\x20')}),(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x19d),{'className':_0x23d9d9(0x163)+({'low':_0x23d9d9(0x1b7),'medium':'bg-blue-100\x20text-blue-800','high':'bg-orange-100\x20text-orange-800','urgent':_0x23d9d9(0x1ad)}[_0x21bd51['priority']]||'bg-gray-100\x20text-gray-800'),'children':_0x21bd51['priority']})]}),(0x0,_0x463ecc[_0x23d9d9(0x19b)])(_0x23d9d9(0x19d),{'className':'text-sm\x20text-gray-500','children':[_0x23d9d9(0x1a6),_0x9df7c8(_0x21bd51['created_at'])]})]}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('p',{'className':_0x23d9d9(0x186),'children':_0x21bd51['description']})]}),(0x0,_0x463ecc[_0x23d9d9(0x19b)])(_0x23d9d9(0x1d6),{'className':'bg-white\x20rounded-lg\x20shadow-md\x20p-6','children':[(0x0,_0x463ecc['jsx'])('h2',{'className':_0x23d9d9(0x1e4),'children':_0x23d9d9(0x19e)}),(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x1d6),{'className':_0x23d9d9(0x161),'children':_0x21bd51[_0x23d9d9(0x180)][_0x23d9d9(0x1b8)](_0x143a11=>(0x0,_0x463ecc['jsxs'])(_0x23d9d9(0x1d6),{'className':'p-4\x20rounded-lg\x20'+(_0x143a11[_0x23d9d9(0x1ae)]?_0x23d9d9(0x189):_0x143a11[_0x23d9d9(0x1a9)]?_0x23d9d9(0x1ba):'bg-blue-50\x20border\x20border-blue-200'),'children':[(0x0,_0x463ecc[_0x23d9d9(0x19b)])('div',{'className':_0x23d9d9(0x1d0),'children':[(0x0,_0x463ecc[_0x23d9d9(0x19b)])(_0x23d9d9(0x1d6),{'className':'flex\x20items-center\x20gap-2','children':[(0x0,_0x463ecc[_0x23d9d9(0x16b)])('span',{'className':_0x23d9d9(0x1b2),'children':_0x143a11['author']?.[_0x23d9d9(0x1a3)]||'System'}),_0x143a11[_0x23d9d9(0x192)]&&(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x19d),{'className':'text-xs\x20px-2\x20py-1\x20bg-gray-200\x20rounded','children':_0x143a11['author']['user_role']}),_0x143a11[_0x23d9d9(0x1ae)]&&(0x0,_0x463ecc[_0x23d9d9(0x16b)])(_0x23d9d9(0x19d),{'className':_0x23d9d9(0x18b),'children':'Internal'})]}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('span',{'className':'text-xs\x20text-gray-500','children':_0x9df7c8(_0x143a11['created_at'])})]}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('p',{'className':'text-gray-700\x20whitespace-pre-wrap','children':_0x143a11['message']})]},_0x143a11['id']))}),(0x0,_0x463ecc[_0x23d9d9(0x19b)])('div',{'className':_0x23d9d9(0x18a),'children':[(0x0,_0x463ecc['jsx'])('textarea',{'value':_0x2a1de5,'onChange':_0x2bceab=>_0x5cf5bf(_0x2bceab[_0x23d9d9(0x19f)][_0x23d9d9(0x1eb)]),'placeholder':_0x23d9d9(0x1dd),'className':_0x23d9d9(0x1b6),'rows':0x4}),(0x0,_0x463ecc['jsxs'])('div',{'className':'flex\x20items-center\x20justify-between\x20mt-3','children':[(0x0,_0x463ecc['jsxs'])(_0x23d9d9(0x1b4),{'className':_0x23d9d9(0x193),'children':[(0x0,_0x463ecc[_0x23d9d9(0x16b)])('input',{'type':'checkbox','checked':_0x16909f,'onChange':_0x4d24a1=>_0x2b6f7(_0x4d24a1['target'][_0x23d9d9(0x1b3)]),'className':'rounded\x20border-gray-300\x20text-emerald-600\x20focus:ring-emerald-500'}),(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x19d),{'className':'text-sm\x20text-gray-700','children':'Internal\x20note\x20(not\x20visible\x20to\x20user)'})]}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('button',{'onClick':_0x5f2c12,'disabled':_0x413072||!_0x2a1de5['trim'](),'className':'px-6\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700\x20disabled:opacity-50\x20disabled:cursor-not-allowed','children':_0x413072?_0x23d9d9(0x1b5):_0x23d9d9(0x1d1)})]})]})]})]}),(0x0,_0x463ecc['jsxs'])('div',{'className':_0x23d9d9(0x1cb),'children':[(0x0,_0x463ecc[_0x23d9d9(0x19b)])('div',{'className':_0x23d9d9(0x1b0),'children':[(0x0,_0x463ecc[_0x23d9d9(0x16b)])('h3',{'className':'font-semibold\x20mb-4','children':_0x23d9d9(0x1e7)}),(0x0,_0x463ecc['jsxs'])(_0x23d9d9(0x1d6),{'className':_0x23d9d9(0x177),'children':[!_0x21bd51[_0x23d9d9(0x198)]&&(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x1c3),{'onClick':_0x3cd7a2,'disabled':_0x10c33d,'className':_0x23d9d9(0x162),'children':_0x23d9d9(0x18c)}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])(_0x23d9d9(0x1c3),{'onClick':()=>_0x1e0fea(!0x0),'disabled':_0x588bc9||_0x21bd51[_0x23d9d9(0x1a5)]>=0x3,'className':_0x23d9d9(0x1de),'children':'Escalate\x20Ticket'}),_0x23d9d9(0x1a1)!==_0x21bd51['status']&&(0x0,_0x463ecc[_0x23d9d9(0x16b)])('button',{'onClick':()=>_0x19d8fa('resolved'),'disabled':_0x10c33d,'className':_0x23d9d9(0x17b),'children':_0x23d9d9(0x1a0)})]})]}),(0x0,_0x463ecc['jsxs'])('div',{'className':'bg-white\x20rounded-lg\x20shadow-md\x20p-6','children':[(0x0,_0x463ecc['jsx'])('h3',{'className':_0x23d9d9(0x1bb),'children':_0x23d9d9(0x179)}),(0x0,_0x463ecc[_0x23d9d9(0x19b)])(_0x23d9d9(0x1d6),{'className':'space-y-3\x20text-sm','children':[(0x0,_0x463ecc[_0x23d9d9(0x19b)])(_0x23d9d9(0x1d6),{'children':[(0x0,_0x463ecc[_0x23d9d9(0x16b)])('span',{'className':_0x23d9d9(0x1ec),'children':_0x23d9d9(0x1a2)}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('span',{'className':'ml-2\x20font-medium','children':_0x21bd51[_0x23d9d9(0x1c6)]['split']('_')[_0x23d9d9(0x1b8)](_0x57250e=>_0x57250e['charAt'](0x0)['toUpperCase']()+_0x57250e[_0x23d9d9(0x1bc)](0x1))['join']('\x20')})]}),(0x0,_0x463ecc['jsxs'])('div',{'children':[(0x0,_0x463ecc[_0x23d9d9(0x16b)])(_0x23d9d9(0x19d),{'className':'text-gray-600','children':_0x23d9d9(0x1d9)}),(0x0,_0x463ecc['jsx'])('span',{'className':_0x23d9d9(0x182),'children':_0x21bd51['user']?.['display_name']})]}),_0x21bd51[_0x23d9d9(0x198)]&&(0x0,_0x463ecc['jsxs'])('div',{'children':[(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x19d),{'className':'text-gray-600','children':_0x23d9d9(0x1e5)}),(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x19d),{'className':_0x23d9d9(0x182),'children':_0x21bd51[_0x23d9d9(0x1da)]?.['display_name']})]}),(0x0,_0x463ecc['jsxs'])('div',{'children':[(0x0,_0x463ecc['jsx'])('span',{'className':_0x23d9d9(0x1ec),'children':'Escalation\x20Level:'}),(0x0,_0x463ecc['jsx'])('span',{'className':_0x23d9d9(0x182),'children':_0x21bd51[_0x23d9d9(0x1a5)]})]})]})]})]})]})]}),_0x8caa53&&(0x0,_0x463ecc[_0x23d9d9(0x16b)])(_0x23d9d9(0x1d6),{'className':'fixed\x20inset-0\x20bg-black\x20bg-opacity-50\x20flex\x20items-center\x20justify-center\x20z-50','children':(0x0,_0x463ecc['jsxs'])(_0x23d9d9(0x1d6),{'className':'bg-white\x20rounded-lg\x20p-6\x20max-w-md\x20w-full\x20mx-4','children':[(0x0,_0x463ecc['jsx'])('h3',{'className':_0x23d9d9(0x1e4),'children':_0x23d9d9(0x168)}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('textarea',{'value':_0xa9e0da,'onChange':_0x2f2ae6=>_0x1876bb(_0x2f2ae6[_0x23d9d9(0x19f)]['value']),'placeholder':'Reason\x20for\x20escalation...','className':_0x23d9d9(0x1b6),'rows':0x4}),(0x0,_0x463ecc[_0x23d9d9(0x19b)])('div',{'className':'flex\x20gap-3\x20mt-4','children':[(0x0,_0x463ecc['jsx'])(_0x23d9d9(0x1c3),{'onClick':()=>_0x1e0fea(!0x1),'className':_0x23d9d9(0x1c4),'children':_0x23d9d9(0x171)}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('button',{'onClick':_0x24864a,'disabled':!_0xa9e0da['trim']()||_0x588bc9,'className':'flex-1\x20px-4\x20py-2\x20bg-orange-600\x20text-white\x20rounded-lg\x20hover:bg-orange-700\x20disabled:opacity-50','children':_0x588bc9?'Escalating...':'Escalate'})]})]})})]})):(0x0,_0x463ecc['jsx'])('div',{'className':'min-h-screen\x20bg-gray-50\x20py-8','children':(0x0,_0x463ecc['jsx'])('div',{'className':'max-w-7xl\x20mx-auto\x20px-4\x20sm:px-6\x20lg:px-8','children':(0x0,_0x463ecc[_0x23d9d9(0x19b)])(_0x23d9d9(0x1d6),{'className':'text-center','children':[(0x0,_0x463ecc['jsx'])('h2',{'className':_0x23d9d9(0x1e1),'children':_0x23d9d9(0x172)}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])('p',{'className':'mt-2\x20text-gray-600','children':'No\x20ticket\x20ID\x20provided.'}),(0x0,_0x463ecc[_0x23d9d9(0x16b)])(_0x23d9d9(0x1c3),{'onClick':()=>_0x2993b8[_0x23d9d9(0x1ea)]('/admin/tickets'),'className':'mt-4\x20px-4\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700','children':_0x23d9d9(0x1d8)})]})})});}function _0x9df7c8(_0x38b99c){return new Date(_0x38b99c)['toLocaleString']();}},0x10edb:(_0x28b000,_0x5283fc,_0x57cd88)=>{'use strict';_0x57cd88['d'](_0x5283fc,{'A':()=>_0x30c4a4});var _0x7ecb4f=_0x57cd88(0x5433),_0x595dd6=_0x57cd88(0x3e0d);function _0x30c4a4(){const _0x170220=_0x1546;let [_0x252176,_0x117c6d]=(0x0,_0x7ecb4f['useState'])(null),[_0x223e05,_0x18a292]=(0x0,_0x7ecb4f['useState'])(!0x0),[_0xf3385a,_0x127e4b]=(0x0,_0x7ecb4f['useState'])(!0x1),[_0x10e594,_0x3f8fe0]=(0x0,_0x7ecb4f[_0x170220(0x18e)])(null),_0x23272b=(0x0,_0x7ecb4f[_0x170220(0x17c)])(async()=>{const _0x1a9be4=_0x170220;try{let _0x38b89c=(0x0,_0x595dd6['getSupabase'])(),{data:_0x42384c,error:_0x4f1007}=await _0x38b89c['auth']['refreshSession']();if(_0x4f1007)return console[_0x1a9be4(0x1af)]('[useAuth]\x20Refresh\x20error:',_0x4f1007),!0x1;if(!_0x42384c?.[_0x1a9be4(0x1d4)])return console[_0x1a9be4(0x1af)]('[useAuth]\x20No\x20session\x20returned\x20after\x20refresh'),!0x1;return _0x3f8fe0(_0x42384c[_0x1a9be4(0x1d4)]),_0x117c6d(_0x42384c['session']['user']),console[_0x1a9be4(0x1a8)](_0x1a9be4(0x170)),!0x0;}catch(_0x2b42f2){return console['error']('[useAuth]\x20Failed\x20to\x20refresh:',_0x2b42f2),!0x1;}},[]);return(0x0,_0x7ecb4f[_0x170220(0x1c7)])(()=>{const _0x29541f=_0x170220;_0x595dd6['api']['getUser']()[_0x29541f(0x1b9)](({data:{user:_0x423347}})=>{_0x117c6d(_0x423347),_0x18a292(!0x1),_0x127e4b(!0x0);})[_0x29541f(0x17f)](()=>{_0x18a292(!0x1),_0x127e4b(!0x0);});let {data:{subscription:_0x154eb6}}=_0x595dd6['api'][_0x29541f(0x174)](async(_0x95857a,_0x48b310)=>{const _0x5daf63=_0x29541f;console['log'](_0x5daf63(0x1d2),_0x95857a),_0x5daf63(0x164)===_0x95857a&&console['log']('[useAuth]\x20Token\x20refreshed\x20successfully'),_0x3f8fe0(_0x48b310),_0x117c6d(_0x48b310?.['user']??null),_0x18a292(!0x1),_0x127e4b(!0x0);});return()=>_0x154eb6[_0x29541f(0x16d)]();},[]),{'user':_0x252176,'session':_0x10e594,'loading':_0x223e05,'isReady':_0xf3385a,'authenticated':!!_0x252176,'refreshSession':_0x23272b,'signOut':()=>_0x595dd6[_0x170220(0x1b1)][_0x170220(0x17d)]()};}},0x14a5a:(_0x1b4056,_0x383781,_0x1c498c)=>{'use strict';_0x1c498c['d'](_0x383781,{'c0':()=>_0x1b130a,'Gs':()=>_0x1be84a,'oJ':()=>_0x2f2947,'yS':()=>_0x3424bc,'dS':()=>_0x26e483,'tY':()=>_0x555050});var _0x41e54b=_0x1c498c(0x5433),_0x231aed=_0x1c498c(0x3e0d);function _0x28baac(_0x9968dd={}){const _0x14512d=_0x1546;let {onTicketCreated:_0x396b07,onTicketUpdated:_0xa66b43,onTicketDeleted:_0x17b923,onMessageAdded:_0x5cf567,ticketId:_0xf19ceb}=_0x9968dd;(0x0,_0x41e54b[_0x14512d(0x1c7)])(()=>{const _0x2315fa=_0x14512d;let _0x49ddb1=(0x0,_0x231aed[_0x2315fa(0x16f)])(),_0x2665f8=_0x49ddb1[_0x2315fa(0x1e2)](_0x2315fa(0x1cf))['on'](_0x2315fa(0x1a4),{'event':_0x2315fa(0x1d5),'schema':_0x2315fa(0x1b1),'table':'support_tickets'},_0x458fc3=>{console['log']('Ticket\x20created:',_0x458fc3),_0x396b07?.(_0x458fc3);})['on'](_0x2315fa(0x1a4),{'event':_0x2315fa(0x190),'schema':'api','table':'support_tickets',..._0xf19ceb?{'filter':_0x2315fa(0x1ce)+_0xf19ceb}:{}},_0x31581f=>{const _0x258b8a=_0x2315fa;console['log'](_0x258b8a(0x1dc),_0x31581f),_0xa66b43?.(_0x31581f);})['on'](_0x2315fa(0x1a4),{'event':_0x2315fa(0x18d),'schema':_0x2315fa(0x1b1),'table':'support_tickets'},_0x24bf4b=>{const _0x2d88a4=_0x2315fa;console[_0x2d88a4(0x1a8)](_0x2d88a4(0x1c9),_0x24bf4b),_0x17b923?.(_0x24bf4b);})[_0x2315fa(0x176)](),_0x152018=null;return _0xf19ceb&&_0x5cf567&&(_0x152018=_0x49ddb1['channel'](_0x2315fa(0x1c2))['on']('postgres_changes',{'event':_0x2315fa(0x1d5),'schema':_0x2315fa(0x1b1),'table':_0x2315fa(0x169),'filter':'ticket_id=eq.'+_0xf19ceb},_0x1c7eac=>{const _0x123f13=_0x2315fa;console[_0x123f13(0x1a8)]('Message\x20added:',_0x1c7eac),_0x5cf567(_0x1c7eac);})['subscribe']()),()=>{const _0x21ebac=_0x2315fa;_0x49ddb1[_0x21ebac(0x173)](_0x2665f8),_0x152018&&_0x49ddb1['removeChannel'](_0x152018);};},[_0x396b07,_0xa66b43,_0x17b923,_0x5cf567,_0xf19ceb]);}function _0x26e483(_0x4c8b6a={}){const _0x447f6c=_0x1546;let [_0x4d1640,_0x3a8073]=(0x0,_0x41e54b[_0x447f6c(0x18e)])([]),[_0x53b20f,_0x1dd22c]=(0x0,_0x41e54b[_0x447f6c(0x18e)])(!0x0),[_0x4b07d0,_0x50f27c]=(0x0,_0x41e54b['useState'])(null),[_0x35da61,_0x54c376]=(0x0,_0x41e54b[_0x447f6c(0x18e)])(0x0),_0xf1867b=(0x0,_0x41e54b[_0x447f6c(0x17c)])(async()=>{const _0x55c1fa=_0x447f6c;try{_0x1dd22c(!0x0),_0x50f27c(null);let {tickets:_0x1fe056,total:_0xe5994b}=await _0x231aed[_0x55c1fa(0x1b1)]['getTickets']({'status':_0x4c8b6a['status'],'category':_0x4c8b6a['category'],'assigned_to':_0x4c8b6a['assigned_to']});_0x3a8073(_0x1fe056),_0x54c376(_0xe5994b);}catch(_0x26dc69){_0x50f27c(_0x26dc69 instanceof Error?_0x26dc69[_0x55c1fa(0x1db)]:_0x55c1fa(0x181));}finally{_0x1dd22c(!0x1);}},[_0x4c8b6a['status'],_0x4c8b6a[_0x447f6c(0x1c6)],_0x4c8b6a['assigned_to']]);return(0x0,_0x41e54b['useEffect'])(()=>{const _0x58ba12=_0x447f6c;if(_0xf1867b(),_0x4c8b6a[_0x58ba12(0x165)]&&_0x4c8b6a['refreshInterval']){let _0x1488d3=setInterval(_0xf1867b,_0x4c8b6a['refreshInterval']);return()=>clearInterval(_0x1488d3);}},[_0xf1867b,_0x4c8b6a[_0x447f6c(0x165)],_0x4c8b6a[_0x447f6c(0x1aa)]]),_0x28baac({'onTicketCreated':!0x1!==_0x4c8b6a[_0x447f6c(0x183)]?()=>_0xf1867b():void 0x0,'onTicketUpdated':!0x1!==_0x4c8b6a[_0x447f6c(0x183)]?()=>_0xf1867b():void 0x0,'onTicketDeleted':!0x1!==_0x4c8b6a['enableRealtime']?()=>_0xf1867b():void 0x0}),{'tickets':_0x4d1640,'loading':_0x53b20f,'error':_0x4b07d0,'total':_0x35da61,'refetch':_0xf1867b};}function _0x3424bc(_0x65124b,_0xc94624=!0x0){const _0x34e363=_0x1546;let [_0x448b4a,_0x2a0cb3]=(0x0,_0x41e54b[_0x34e363(0x18e)])(null),[_0x3f1178,_0x1936db]=(0x0,_0x41e54b['useState'])(!0x0),[_0x53208a,_0x204c40]=(0x0,_0x41e54b['useState'])(null),_0x5ca87d=(0x0,_0x41e54b['useCallback'])(async()=>{const _0x5c5dac=_0x34e363;if(!_0x65124b){_0x2a0cb3(null),_0x1936db(!0x1);return;}try{_0x1936db(!0x0),_0x204c40(null);let _0x2a1615=await _0x231aed[_0x5c5dac(0x1b1)]['getTicket'](_0x65124b);_0x2a0cb3(_0x2a1615);}catch(_0x4ff650){_0x204c40(_0x4ff650 instanceof Error?_0x4ff650['message']:'Failed\x20to\x20fetch\x20ticket');}finally{_0x1936db(!0x1);}},[_0x65124b]);return(0x0,_0x41e54b['useEffect'])(()=>{_0x5ca87d();},[_0x5ca87d]),_0x28baac({'ticketId':_0x65124b||void 0x0,'onTicketUpdated':_0xc94624?()=>_0x5ca87d():void 0x0,'onMessageAdded':_0xc94624?()=>_0x5ca87d():void 0x0}),{'ticket':_0x448b4a,'loading':_0x3f1178,'error':_0x53208a,'refetch':_0x5ca87d};}function _0x1be84a(){const _0x310c5f=_0x1546;let [_0x1066ba,_0x3c368a]=(0x0,_0x41e54b['useState'])(!0x1),[_0x387f67,_0x2a8533]=(0x0,_0x41e54b[_0x310c5f(0x18e)])(null);return{'createTicket':async _0x1e75ab=>{const _0x3cacc1=_0x310c5f;try{return _0x3c368a(!0x0),_0x2a8533(null),(await _0x231aed['api']['createTicket'](_0x1e75ab))['ticket'];}catch(_0x1b4a49){let _0x1b2f77=_0x1b4a49 instanceof Error?_0x1b4a49['message']:_0x3cacc1(0x16e);throw _0x2a8533(_0x1b2f77),Error(_0x1b2f77);}finally{_0x3c368a(!0x1);}},'loading':_0x1066ba,'error':_0x387f67};}function _0x555050(){let [_0x411415,_0x4d0a51]=(0x0,_0x41e54b['useState'])(!0x1),[_0x365aac,_0x4decc6]=(0x0,_0x41e54b['useState'])(null);return{'updateTicket':async _0x59adbb=>{const _0x1a675d=_0x1546;try{return _0x4d0a51(!0x0),_0x4decc6(null),(await _0x231aed['api']['updateTicket'](_0x59adbb))[_0x1a675d(0x1cd)];}catch(_0x22642a){let _0x505cb7=_0x22642a instanceof Error?_0x22642a['message']:_0x1a675d(0x178);throw _0x4decc6(_0x505cb7),Error(_0x505cb7);}finally{_0x4d0a51(!0x1);}},'loading':_0x411415,'error':_0x365aac};}function _0x2f2947(){const _0x2c12e0=_0x1546;let [_0x18b08b,_0x43d198]=(0x0,_0x41e54b[_0x2c12e0(0x18e)])(!0x1),[_0x48d373,_0x2ddc5a]=(0x0,_0x41e54b['useState'])(null);return{'escalateTicket':async _0x34a127=>{const _0xcee4c5=_0x2c12e0;try{return _0x43d198(!0x0),_0x2ddc5a(null),(await _0x231aed[_0xcee4c5(0x1b1)]['escalateTicket'](_0x34a127))[_0xcee4c5(0x1cd)];}catch(_0x50c567){let _0x1bc2e7=_0x50c567 instanceof Error?_0x50c567[_0xcee4c5(0x1db)]:_0xcee4c5(0x16c);throw _0x2ddc5a(_0x1bc2e7),Error(_0x1bc2e7);}finally{_0x43d198(!0x1);}},'loading':_0x18b08b,'error':_0x48d373};}function _0x1b130a(){const _0x6cb56c=_0x1546;let [_0x5a3363,_0x1959b6]=(0x0,_0x41e54b['useState'])(!0x1),[_0x388bdc,_0x3323ac]=(0x0,_0x41e54b[_0x6cb56c(0x18e)])(null);return{'addMessage':async _0x38b660=>{const _0x30b86f=_0x6cb56c;try{return _0x1959b6(!0x0),_0x3323ac(null),(await _0x231aed[_0x30b86f(0x1b1)][_0x30b86f(0x1c5)](_0x38b660))[_0x30b86f(0x1db)];}catch(_0x428665){let _0x8a37c2=_0x428665 instanceof Error?_0x428665['message']:_0x30b86f(0x1e0);throw _0x3323ac(_0x8a37c2),Error(_0x8a37c2);}finally{_0x1959b6(!0x1);}},'loading':_0x5a3363,'error':_0x388bdc};}}},_0x1e3410=>{_0x1e3410['O'](0x0,[0x2603,0x259f,0x16fd,0x1b1b,0x492,0x1cbe],()=>_0x1e3410(_0x1e3410['s']=0x165b)),_N_E=_0x1e3410['O']();}]));