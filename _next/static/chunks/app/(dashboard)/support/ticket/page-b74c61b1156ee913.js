function _0x35a0(_0x18250c,_0x11216f){_0x18250c=_0x18250c-0xbc;const _0x1af1d5=_0x1af1();let _0x35a070=_0x1af1d5[_0x18250c];return _0x35a070;}function _0x1af1(){const _0x54360f=['min-h-screen\x20bg-gray-50\x20py-8','span','512883ctvYer','7986HddEXL','Thank\x20you\x20for\x20rating\x20this\x20ticket!\x20Your\x20feedback\x20helps\x20us\x20improve.','Ticket\x20updated:','log','onAuthStateChange','Ticket\x20created:','TOKEN_REFRESHED','How\x20satisfied\x20are\x20you\x20with\x20the\x20resolution?','DELETE','slice','useRouter','text-3xl\x20font-bold\x20text-gray-900','satisfaction_rating','bg-green-100\x20text-green-800','channel','border-t\x20pt-4','catch','Original\x20Request:','130487UdCUkN','flex\x20justify-end\x20mt-3','filter','status','4UJlidH','No\x20ticket\x20ID\x20provided.','button','support_tickets','id=eq.','flex\x20gap-1\x20mt-2','Conversation','closed','bg-gray-50\x20border\x20border-gray-200','user','bg-blue-100\x20text-blue-800','Send\x20Reply','animate-spin\x20rounded-full\x20h-12\x20w-12\x20border-b-2\x20border-emerald-600\x20mx-auto','space-y-4\x20mb-6','textarea','flex\x20items-center\x20gap-3','display_name','includes','px-3\x20py-1\x20text-sm\x20font-medium\x20rounded-full\x20','640252stmFPb','postgres_changes','toUpperCase','text-xs\x20px-2\x20py-1\x20bg-blue-200\x20rounded','updateTicket','assignee','Back\x20to\x20Support','charAt','useEffect','mt-4\x20text-emerald-600\x20hover:text-emerald-700','1630NQOjAU','/support','text-4xl\x20hover:scale-110\x20transition-transform\x20disabled:opacity-50','Failed\x20to\x20create\x20ticket','messages','Failed\x20to\x20escalate\x20ticket','[useAuth]\x20Failed\x20to\x20refresh:','INSERT','Failed\x20to\x20fetch\x20ticket','text-center','admin','Created\x20','1413489eDKXKc','split','text-gray-600','then','useSearchParams','[useAuth]\x20Session\x20refreshed\x20successfully','ticket_id=eq.','jsxs','Category:','text-2xl\x20font-bold\x20text-gray-900','flex\x20items-start\x20justify-between\x20mb-2','category','assigned_to','bg-gray-50\x20rounded-lg\x20p-4','System','ticket','jsx','bg-red-100\x20text-red-800','usePathname','flex\x20items-center\x20justify-center\x20min-h-screen','useCallback','enableRealtime','29491JabSAe','autoRefresh','title','ml-2\x20font-medium','push','refreshInterval','session','api','user_role','is_internal','mt-4\x20text-gray-600','ticket_messages_changes','bg-green-50\x20border\x20border-green-200\x20rounded-lg\x20p-6','64AYDoCB','bg-gray-100\x20text-gray-800','div','map','4090paUINQ','text-gray-700\x20whitespace-pre-wrap','webpackChunk_N_E','556182ApRUat','getSupabase','useState','createTicket','[useAuth]\x20Token\x20refreshed\x20successfully','flex\x20items-center\x20gap-2','message','Failed\x20to\x20add\x20message','Ticket\x20Not\x20Found','error','[useAuth]\x20No\x20session\x20returned\x20after\x20refresh','manager','Support\x20Team','author','text-lg\x20font-semibold\x20mb-4'];_0x1af1=function(){return _0x54360f;};return _0x1af1();}const _0x1bb93f=_0x35a0;(function(_0xf6aae5,_0x42eec8){const _0x5f5103=_0x35a0,_0x491ba4=_0xf6aae5();while(!![]){try{const _0x2ad847=-parseInt(_0x5f5103(0x131))/0x1+parseInt(_0x5f5103(0xcd))/0x2+parseInt(_0x5f5103(0x10d))/0x3*(parseInt(_0x5f5103(0x135))/0x4)+parseInt(_0x5f5103(0xd7))/0x5*(-parseInt(_0x5f5103(0x11f))/0x6)+-parseInt(_0x5f5103(0xe3))/0x7+parseInt(_0x5f5103(0x106))/0x8*(-parseInt(_0x5f5103(0x11e))/0x9)+parseInt(_0x5f5103(0x10a))/0xa*(parseInt(_0x5f5103(0xf9))/0xb);if(_0x2ad847===_0x42eec8)break;else _0x491ba4['push'](_0x491ba4['shift']());}catch(_0x14a970){_0x491ba4['push'](_0x491ba4['shift']());}}}(_0x1af1,0x5cbb9),(self['webpackChunk_N_E']=self[_0x1bb93f(0x10c)]||[])[_0x1bb93f(0xfd)]([[0xac3],{0x9c1c:(_0x22eb0a,_0x4d001c,_0x366eb1)=>{'use strict';_0x366eb1['r'](_0x4d001c),_0x366eb1['d'](_0x4d001c,{'default':()=>_0x38096c});var _0xdb04f9=_0x366eb1(0xd773),_0x5628eb=_0x366eb1(0x5433),_0x5a02d2=_0x366eb1(0x10edb),_0x46b5f3=_0x366eb1(0xc541),_0x4af901=_0x366eb1(0x14a5a);function _0x38096c(){const _0x207f08=_0x35a0;let {user:_0x3cb08b,loading:_0x514f8c}=(0x0,_0x5a02d2['A'])(),_0xf03952=(0x0,_0x46b5f3[_0x207f08(0x129)])(),_0x25ab66=(0x0,_0x46b5f3[_0x207f08(0xe7)])()['get']('id'),{ticket:_0x443957,loading:_0x39a884,error:_0xc470c3,refetch:_0x55dd12}=(0x0,_0x4af901['yS'])(_0x25ab66||''),{updateTicket:_0x5a5487,loading:_0xd49225}=(0x0,_0x4af901['tY'])(),{addMessage:_0x3b678f,loading:_0x23f42e}=(0x0,_0x4af901['c0'])(),[_0x5564c2,_0x5ba0c8]=(0x0,_0x5628eb['useState'])(''),[_0x2c9fa4,_0x3e7f45]=(0x0,_0x5628eb[_0x207f08(0x10f)])(null);(0x0,_0x5628eb[_0x207f08(0xd5)])(()=>{_0x514f8c||_0x3cb08b||_0xf03952['push']('/auth/login');},[_0x3cb08b,_0x514f8c,_0xf03952]);let _0x5eae18=async()=>{const _0x4bf17a=_0x207f08;if(_0x5564c2['trim']()&&_0x25ab66)try{await _0x3b678f({'ticketId':_0x25ab66,'message':_0x5564c2}),_0x5ba0c8(''),_0x55dd12();}catch(_0x2f9995){console[_0x4bf17a(0x116)]('Failed\x20to\x20send\x20message:',_0x2f9995);}},_0x16f26c=async _0x11af67=>{const _0x1e083c=_0x207f08;if(_0x25ab66)try{await _0x5a5487({'ticketId':_0x25ab66,'satisfaction_rating':_0x11af67}),_0x3e7f45(_0x11af67),_0x55dd12();}catch(_0x3f8f23){console[_0x1e083c(0x116)]('Failed\x20to\x20rate\x20ticket:',_0x3f8f23);}};return _0x25ab66?_0x514f8c||_0x39a884?(0x0,_0xdb04f9['jsx'])('div',{'className':_0x207f08(0xf6),'children':(0x0,_0xdb04f9[_0x207f08(0xea)])('div',{'className':'text-center','children':[(0x0,_0xdb04f9['jsx'])('div',{'className':_0x207f08(0xc6)}),(0x0,_0xdb04f9[_0x207f08(0xf3)])('p',{'className':_0x207f08(0x103),'children':'Loading\x20ticket...'})]})}):_0xc470c3||!_0x443957?(0x0,_0xdb04f9['jsx'])('div',{'className':'flex\x20items-center\x20justify-center\x20min-h-screen','children':(0x0,_0xdb04f9['jsxs'])('div',{'className':_0x207f08(0xe0),'children':[(0x0,_0xdb04f9['jsx'])('p',{'className':'text-red-600','children':'Failed\x20to\x20load\x20ticket'}),(0x0,_0xdb04f9[_0x207f08(0xf3)])('button',{'onClick':()=>_0xf03952[_0x207f08(0xfd)]('/support'),'className':_0x207f08(0xd6),'children':_0x207f08(0xd3)})]})}):(0x0,_0xdb04f9[_0x207f08(0xf3)])(_0x207f08(0x108),{'className':'min-h-screen\x20bg-gray-50\x20py-8','children':(0x0,_0xdb04f9[_0x207f08(0xea)])(_0x207f08(0x108),{'className':'max-w-4xl\x20mx-auto\x20px-4\x20sm:px-6\x20lg:px-8','children':[(0x0,_0xdb04f9['jsxs'])(_0x207f08(0x108),{'className':'mb-6','children':[(0x0,_0xdb04f9['jsx'])(_0x207f08(0xbc),{'onClick':()=>_0xf03952[_0x207f08(0xfd)](_0x207f08(0xd8)),'className':'text-gray-600\x20hover:text-gray-900\x20mb-4\x20flex\x20items-center\x20gap-2','children':'←\x20Back\x20to\x20Support'}),(0x0,_0xdb04f9['jsx'])('h1',{'className':_0x207f08(0x12a),'children':_0x443957[_0x207f08(0xfb)]})]}),(0x0,_0xdb04f9[_0x207f08(0xea)])('div',{'className':'bg-white\x20rounded-lg\x20shadow-md\x20p-6\x20mb-6','children':[(0x0,_0xdb04f9['jsxs'])('div',{'className':'flex\x20items-center\x20justify-between\x20mb-4','children':[(0x0,_0xdb04f9[_0x207f08(0xea)])('div',{'className':_0x207f08(0xc9),'children':[(0x0,_0xdb04f9['jsx'])('span',{'className':'px-4\x20py-2\x20text-sm\x20font-medium\x20rounded-full\x20'+({'open':'bg-blue-100\x20text-blue-800','in_progress':'bg-yellow-100\x20text-yellow-800','waiting_response':'bg-purple-100\x20text-purple-800','escalated':'bg-red-100\x20text-red-800','resolved':_0x207f08(0x12c),'closed':'bg-gray-100\x20text-gray-800'}[_0x443957['status']]||_0x207f08(0x107)),'children':_0x443957['status'][_0x207f08(0xe4)]('_')['map'](_0x3f052b=>_0x3f052b[_0x207f08(0xd4)](0x0)[_0x207f08(0xcf)]()+_0x3f052b[_0x207f08(0x128)](0x1))['join']('\x20')}),(0x0,_0xdb04f9['jsx'])('span',{'className':_0x207f08(0xcc)+({'low':_0x207f08(0x107),'medium':_0x207f08(0xc4),'high':'bg-orange-100\x20text-orange-800','urgent':_0x207f08(0xf4)}[_0x443957['priority']]||'bg-gray-100\x20text-gray-800'),'children':_0x443957['priority']})]}),(0x0,_0xdb04f9[_0x207f08(0xea)])('span',{'className':'text-sm\x20text-gray-500','children':[_0x207f08(0xe2),_0x1d7782(_0x443957['created_at'])]})]}),(0x0,_0xdb04f9[_0x207f08(0xea)])(_0x207f08(0x108),{'className':_0x207f08(0xf0),'children':[(0x0,_0xdb04f9[_0x207f08(0xf3)])('p',{'className':'text-sm\x20font-medium\x20text-gray-700\x20mb-2','children':_0x207f08(0x130)}),(0x0,_0xdb04f9['jsx'])('p',{'className':_0x207f08(0x10b),'children':_0x443957['description']})]}),(0x0,_0xdb04f9[_0x207f08(0xea)])('div',{'className':'grid\x20grid-cols-2\x20gap-4\x20mt-4\x20text-sm','children':[(0x0,_0xdb04f9['jsxs'])(_0x207f08(0x108),{'children':[(0x0,_0xdb04f9[_0x207f08(0xf3)])('span',{'className':'text-gray-600','children':_0x207f08(0xeb)}),(0x0,_0xdb04f9[_0x207f08(0xf3)])('span',{'className':_0x207f08(0xfc),'children':_0x443957[_0x207f08(0xee)]['split']('_')['map'](_0x15d12d=>_0x15d12d[_0x207f08(0xd4)](0x0)['toUpperCase']()+_0x15d12d['slice'](0x1))['join']('\x20')})]}),_0x443957['assigned_to']&&_0x443957['assignee']&&(0x0,_0xdb04f9['jsxs'])(_0x207f08(0x108),{'children':[(0x0,_0xdb04f9[_0x207f08(0xf3)])(_0x207f08(0x11d),{'className':_0x207f08(0xe5),'children':'Assigned\x20to:'}),(0x0,_0xdb04f9[_0x207f08(0xf3)])(_0x207f08(0x11d),{'className':_0x207f08(0xfc),'children':_0x443957[_0x207f08(0xd2)][_0x207f08(0xca)]})]})]})]}),(0x0,_0xdb04f9['jsxs'])('div',{'className':'bg-white\x20rounded-lg\x20shadow-md\x20p-6\x20mb-6','children':[(0x0,_0xdb04f9[_0x207f08(0xf3)])('h2',{'className':'text-xl\x20font-semibold\x20mb-4','children':_0x207f08(0xc0)}),(0x0,_0xdb04f9['jsx'])('div',{'className':_0x207f08(0xc7),'children':_0x443957[_0x207f08(0xdb)][_0x207f08(0x133)](_0x109398=>!_0x109398[_0x207f08(0x102)])[_0x207f08(0x109)](_0x1b842b=>{const _0x550ab2=_0x207f08;let _0x2ed7e1=_0x1b842b[_0x550ab2(0x11a)]&&['support',_0x550ab2(0x118),_0x550ab2(0xe1)][_0x550ab2(0xcb)](_0x1b842b[_0x550ab2(0x11a)][_0x550ab2(0x101)]);return(0x0,_0xdb04f9[_0x550ab2(0xea)])(_0x550ab2(0x108),{'className':'p-4\x20rounded-lg\x20'+(_0x1b842b['is_system']?_0x550ab2(0xc2):_0x2ed7e1?'bg-blue-50\x20border\x20border-blue-200':'bg-emerald-50\x20border\x20border-emerald-200'),'children':[(0x0,_0xdb04f9['jsxs'])(_0x550ab2(0x108),{'className':_0x550ab2(0xed),'children':[(0x0,_0xdb04f9[_0x550ab2(0xea)])(_0x550ab2(0x108),{'className':_0x550ab2(0x112),'children':[(0x0,_0xdb04f9['jsx'])('span',{'className':'font-semibold\x20text-gray-900','children':_0x1b842b[_0x550ab2(0x11a)]?.['display_name']||_0x550ab2(0xf1)}),_0x2ed7e1&&(0x0,_0xdb04f9['jsx'])(_0x550ab2(0x11d),{'className':_0x550ab2(0xd0),'children':_0x550ab2(0x119)})]}),(0x0,_0xdb04f9[_0x550ab2(0xf3)])(_0x550ab2(0x11d),{'className':'text-xs\x20text-gray-500','children':_0x1d7782(_0x1b842b['created_at'])})]}),(0x0,_0xdb04f9[_0x550ab2(0xf3)])('p',{'className':'text-gray-700\x20whitespace-pre-wrap','children':_0x1b842b[_0x550ab2(0x113)]})]},_0x1b842b['id']);})}),_0x207f08(0xc1)!==_0x443957[_0x207f08(0x134)]&&(0x0,_0xdb04f9['jsxs'])('div',{'className':_0x207f08(0x12e),'children':[(0x0,_0xdb04f9['jsx'])(_0x207f08(0xc8),{'value':_0x5564c2,'onChange':_0x239ed0=>_0x5ba0c8(_0x239ed0['target']['value']),'placeholder':'Type\x20your\x20reply...','className':'w-full\x20px-4\x20py-3\x20border\x20border-gray-300\x20rounded-lg\x20focus:ring-2\x20focus:ring-emerald-500\x20focus:border-transparent\x20resize-none','rows':0x4}),(0x0,_0xdb04f9[_0x207f08(0xf3)])(_0x207f08(0x108),{'className':_0x207f08(0x132),'children':(0x0,_0xdb04f9['jsx'])(_0x207f08(0xbc),{'onClick':_0x5eae18,'disabled':_0x23f42e||!_0x5564c2['trim'](),'className':'px-6\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700\x20disabled:opacity-50\x20disabled:cursor-not-allowed','children':_0x23f42e?'Sending...':_0x207f08(0xc5)})})]})]}),'resolved'===_0x443957['status']&&!_0x443957['satisfaction_rating']&&(0x0,_0xdb04f9[_0x207f08(0xea)])(_0x207f08(0x108),{'className':'bg-white\x20rounded-lg\x20shadow-md\x20p-6','children':[(0x0,_0xdb04f9['jsx'])('h3',{'className':_0x207f08(0x11b),'children':'Rate\x20Your\x20Support\x20Experience'}),(0x0,_0xdb04f9['jsx'])('p',{'className':'text-gray-600\x20mb-4','children':_0x207f08(0x126)}),(0x0,_0xdb04f9['jsx'])(_0x207f08(0x108),{'className':'flex\x20gap-2','children':[0x1,0x2,0x3,0x4,0x5]['map'](_0x27d48e=>(0x0,_0xdb04f9[_0x207f08(0xf3)])('button',{'onClick':()=>_0x16f26c(_0x27d48e),'disabled':_0xd49225,'className':_0x207f08(0xd9),'children':_0x27d48e<=(_0x2c9fa4||0x0)?'⭐':'☆'},_0x27d48e))})]}),_0x443957[_0x207f08(0x12b)]&&(0x0,_0xdb04f9['jsxs'])('div',{'className':_0x207f08(0x105),'children':[(0x0,_0xdb04f9[_0x207f08(0xf3)])('p',{'className':'text-green-800','children':_0x207f08(0x120)}),(0x0,_0xdb04f9[_0x207f08(0xf3)])('div',{'className':_0x207f08(0xbf),'children':[0x1,0x2,0x3,0x4,0x5]['map'](_0x42d8a0=>(0x0,_0xdb04f9[_0x207f08(0xf3)])('span',{'className':'text-2xl','children':_0x42d8a0<=_0x443957[_0x207f08(0x12b)]?'⭐':'☆'},_0x42d8a0))})]})]})}):(0x0,_0xdb04f9['jsx'])(_0x207f08(0x108),{'className':_0x207f08(0x11c),'children':(0x0,_0xdb04f9[_0x207f08(0xf3)])('div',{'className':'max-w-4xl\x20mx-auto\x20px-4\x20sm:px-6\x20lg:px-8','children':(0x0,_0xdb04f9[_0x207f08(0xea)])(_0x207f08(0x108),{'className':_0x207f08(0xe0),'children':[(0x0,_0xdb04f9[_0x207f08(0xf3)])('h2',{'className':_0x207f08(0xec),'children':_0x207f08(0x115)}),(0x0,_0xdb04f9['jsx'])('p',{'className':'mt-2\x20text-gray-600','children':_0x207f08(0x136)}),(0x0,_0xdb04f9[_0x207f08(0xf3)])('button',{'onClick':()=>_0xf03952[_0x207f08(0xfd)](_0x207f08(0xd8)),'className':'mt-4\x20px-4\x20py-2\x20bg-emerald-600\x20text-white\x20rounded-lg\x20hover:bg-emerald-700','children':_0x207f08(0xd3)})]})})});}function _0x1d7782(_0x353f13){return new Date(_0x353f13)['toLocaleString']();}},0xb73f:(_0x3a97f6,_0x4f5e60,_0xe9d0ba)=>{const _0xfb88dc=_0x1bb93f;Promise['resolve']()[_0xfb88dc(0xe6)](_0xe9d0ba['bind'](_0xe9d0ba,0x9c1c));},0xc541:(_0x167b66,_0x41e1ba,_0x63ee15)=>{'use strict';const _0x2834dd=_0x1bb93f;var _0x1c2632=_0x63ee15(0xed0d);_0x63ee15['o'](_0x1c2632,_0x2834dd(0xf5))&&_0x63ee15['d'](_0x41e1ba,{'usePathname':function(){return _0x1c2632['usePathname'];}}),_0x63ee15['o'](_0x1c2632,'useRouter')&&_0x63ee15['d'](_0x41e1ba,{'useRouter':function(){const _0x3ea759=_0x2834dd;return _0x1c2632[_0x3ea759(0x129)];}}),_0x63ee15['o'](_0x1c2632,_0x2834dd(0xe7))&&_0x63ee15['d'](_0x41e1ba,{'useSearchParams':function(){return _0x1c2632['useSearchParams'];}});},0x10edb:(_0x4ffe6f,_0x3916cb,_0x3e2e93)=>{'use strict';_0x3e2e93['d'](_0x3916cb,{'A':()=>_0x170305});var _0x47cc32=_0x3e2e93(0x5433),_0xa8f652=_0x3e2e93(0x3e0d);function _0x170305(){const _0x1132a5=_0x35a0;let [_0xd845d7,_0xa1d55e]=(0x0,_0x47cc32['useState'])(null),[_0x1d5692,_0x1e6e0f]=(0x0,_0x47cc32[_0x1132a5(0x10f)])(!0x0),[_0x12ea76,_0x4ac355]=(0x0,_0x47cc32[_0x1132a5(0x10f)])(!0x1),[_0xbb220c,_0x12b72b]=(0x0,_0x47cc32['useState'])(null),_0x50f662=(0x0,_0x47cc32[_0x1132a5(0xf7)])(async()=>{const _0x34612c=_0x1132a5;try{let _0x3392fe=(0x0,_0xa8f652[_0x34612c(0x10e)])(),{data:_0x7d47e7,error:_0xd57a82}=await _0x3392fe['auth']['refreshSession']();if(_0xd57a82)return console[_0x34612c(0x116)]('[useAuth]\x20Refresh\x20error:',_0xd57a82),!0x1;if(!_0x7d47e7?.['session'])return console['error'](_0x34612c(0x117)),!0x1;return _0x12b72b(_0x7d47e7[_0x34612c(0xff)]),_0xa1d55e(_0x7d47e7[_0x34612c(0xff)][_0x34612c(0xc3)]),console['log'](_0x34612c(0xe8)),!0x0;}catch(_0x4054a0){return console['error'](_0x34612c(0xdd),_0x4054a0),!0x1;}},[]);return(0x0,_0x47cc32[_0x1132a5(0xd5)])(()=>{const _0xc219af=_0x1132a5;_0xa8f652['api']['getUser']()[_0xc219af(0xe6)](({data:{user:_0x9a6d73}})=>{_0xa1d55e(_0x9a6d73),_0x1e6e0f(!0x1),_0x4ac355(!0x0);})[_0xc219af(0x12f)](()=>{_0x1e6e0f(!0x1),_0x4ac355(!0x0);});let {data:{subscription:_0x584d68}}=_0xa8f652[_0xc219af(0x100)][_0xc219af(0x123)](async(_0x2b24a8,_0x283533)=>{const _0x12f8c9=_0xc219af;console['log']('[useAuth]\x20Auth\x20state\x20change:',_0x2b24a8),_0x12f8c9(0x125)===_0x2b24a8&&console[_0x12f8c9(0x122)](_0x12f8c9(0x111)),_0x12b72b(_0x283533),_0xa1d55e(_0x283533?.['user']??null),_0x1e6e0f(!0x1),_0x4ac355(!0x0);});return()=>_0x584d68['unsubscribe']();},[]),{'user':_0xd845d7,'session':_0xbb220c,'loading':_0x1d5692,'isReady':_0x12ea76,'authenticated':!!_0xd845d7,'refreshSession':_0x50f662,'signOut':()=>_0xa8f652['api']['signOut']()};}},0x14a5a:(_0x266846,_0x24104f,_0x595287)=>{'use strict';_0x595287['d'](_0x24104f,{'c0':()=>_0x2fa196,'Gs':()=>_0x14b49b,'oJ':()=>_0x1e244d,'yS':()=>_0x14408a,'dS':()=>_0x4a2f99,'tY':()=>_0x5bec31});var _0x16cf4a=_0x595287(0x5433),_0x16238d=_0x595287(0x3e0d);function _0x50081d(_0x2b1f60={}){const _0x5ac427=_0x35a0;let {onTicketCreated:_0x4f96cf,onTicketUpdated:_0x34ac02,onTicketDeleted:_0x560d0c,onMessageAdded:_0xf37d02,ticketId:_0x4fd20e}=_0x2b1f60;(0x0,_0x16cf4a[_0x5ac427(0xd5)])(()=>{const _0x1f2ae2=_0x5ac427;let _0x14ed51=(0x0,_0x16238d['getSupabase'])(),_0x378bec=_0x14ed51[_0x1f2ae2(0x12d)]('support_tickets_changes')['on']('postgres_changes',{'event':_0x1f2ae2(0xde),'schema':_0x1f2ae2(0x100),'table':_0x1f2ae2(0xbd)},_0x1af806=>{const _0xe448a7=_0x1f2ae2;console['log'](_0xe448a7(0x124),_0x1af806),_0x4f96cf?.(_0x1af806);})['on'](_0x1f2ae2(0xce),{'event':'UPDATE','schema':'api','table':'support_tickets',..._0x4fd20e?{'filter':_0x1f2ae2(0xbe)+_0x4fd20e}:{}},_0xf92863=>{const _0x590a96=_0x1f2ae2;console[_0x590a96(0x122)](_0x590a96(0x121),_0xf92863),_0x34ac02?.(_0xf92863);})['on'](_0x1f2ae2(0xce),{'event':_0x1f2ae2(0x127),'schema':'api','table':'support_tickets'},_0x2971aa=>{console['log']('Ticket\x20deleted:',_0x2971aa),_0x560d0c?.(_0x2971aa);})['subscribe'](),_0x21567e=null;return _0x4fd20e&&_0xf37d02&&(_0x21567e=_0x14ed51['channel'](_0x1f2ae2(0x104))['on']('postgres_changes',{'event':'INSERT','schema':'api','table':'ticket_messages','filter':_0x1f2ae2(0xe9)+_0x4fd20e},_0x348335=>{const _0x337d19=_0x1f2ae2;console[_0x337d19(0x122)]('Message\x20added:',_0x348335),_0xf37d02(_0x348335);})['subscribe']()),()=>{_0x14ed51['removeChannel'](_0x378bec),_0x21567e&&_0x14ed51['removeChannel'](_0x21567e);};},[_0x4f96cf,_0x34ac02,_0x560d0c,_0xf37d02,_0x4fd20e]);}function _0x4a2f99(_0x399207={}){const _0x33f9ff=_0x35a0;let [_0x1c7fa8,_0x2c540f]=(0x0,_0x16cf4a[_0x33f9ff(0x10f)])([]),[_0x3c9fbe,_0x18f8af]=(0x0,_0x16cf4a['useState'])(!0x0),[_0x201f36,_0x24a53a]=(0x0,_0x16cf4a[_0x33f9ff(0x10f)])(null),[_0x1120d1,_0x332b61]=(0x0,_0x16cf4a[_0x33f9ff(0x10f)])(0x0),_0x170224=(0x0,_0x16cf4a[_0x33f9ff(0xf7)])(async()=>{const _0x4b9215=_0x33f9ff;try{_0x18f8af(!0x0),_0x24a53a(null);let {tickets:_0x2a6058,total:_0x160e0b}=await _0x16238d[_0x4b9215(0x100)]['getTickets']({'status':_0x399207['status'],'category':_0x399207['category'],'assigned_to':_0x399207[_0x4b9215(0xef)]});_0x2c540f(_0x2a6058),_0x332b61(_0x160e0b);}catch(_0x155aba){_0x24a53a(_0x155aba instanceof Error?_0x155aba['message']:'Failed\x20to\x20fetch\x20tickets');}finally{_0x18f8af(!0x1);}},[_0x399207['status'],_0x399207['category'],_0x399207['assigned_to']]);return(0x0,_0x16cf4a[_0x33f9ff(0xd5)])(()=>{if(_0x170224(),_0x399207['autoRefresh']&&_0x399207['refreshInterval']){let _0x5a5058=setInterval(_0x170224,_0x399207['refreshInterval']);return()=>clearInterval(_0x5a5058);}},[_0x170224,_0x399207[_0x33f9ff(0xfa)],_0x399207[_0x33f9ff(0xfe)]]),_0x50081d({'onTicketCreated':!0x1!==_0x399207[_0x33f9ff(0xf8)]?()=>_0x170224():void 0x0,'onTicketUpdated':!0x1!==_0x399207['enableRealtime']?()=>_0x170224():void 0x0,'onTicketDeleted':!0x1!==_0x399207['enableRealtime']?()=>_0x170224():void 0x0}),{'tickets':_0x1c7fa8,'loading':_0x3c9fbe,'error':_0x201f36,'total':_0x1120d1,'refetch':_0x170224};}function _0x14408a(_0x2715d3,_0x25a92a=!0x0){const _0x419820=_0x35a0;let [_0x574e57,_0x4116e3]=(0x0,_0x16cf4a['useState'])(null),[_0x3069e7,_0x33f709]=(0x0,_0x16cf4a['useState'])(!0x0),[_0x16473e,_0x2fc70e]=(0x0,_0x16cf4a['useState'])(null),_0x5231aa=(0x0,_0x16cf4a[_0x419820(0xf7)])(async()=>{const _0x45721d=_0x419820;if(!_0x2715d3){_0x4116e3(null),_0x33f709(!0x1);return;}try{_0x33f709(!0x0),_0x2fc70e(null);let _0x5a9cd0=await _0x16238d['api']['getTicket'](_0x2715d3);_0x4116e3(_0x5a9cd0);}catch(_0x1fa45c){_0x2fc70e(_0x1fa45c instanceof Error?_0x1fa45c[_0x45721d(0x113)]:_0x45721d(0xdf));}finally{_0x33f709(!0x1);}},[_0x2715d3]);return(0x0,_0x16cf4a['useEffect'])(()=>{_0x5231aa();},[_0x5231aa]),_0x50081d({'ticketId':_0x2715d3||void 0x0,'onTicketUpdated':_0x25a92a?()=>_0x5231aa():void 0x0,'onMessageAdded':_0x25a92a?()=>_0x5231aa():void 0x0}),{'ticket':_0x574e57,'loading':_0x3069e7,'error':_0x16473e,'refetch':_0x5231aa};}function _0x14b49b(){const _0x5ab84a=_0x35a0;let [_0x1887b4,_0x5f0df6]=(0x0,_0x16cf4a['useState'])(!0x1),[_0x41b68e,_0x421946]=(0x0,_0x16cf4a[_0x5ab84a(0x10f)])(null);return{'createTicket':async _0x35994e=>{const _0xb37515=_0x5ab84a;try{return _0x5f0df6(!0x0),_0x421946(null),(await _0x16238d[_0xb37515(0x100)][_0xb37515(0x110)](_0x35994e))[_0xb37515(0xf2)];}catch(_0x3d3a12){let _0x19e911=_0x3d3a12 instanceof Error?_0x3d3a12[_0xb37515(0x113)]:_0xb37515(0xda);throw _0x421946(_0x19e911),Error(_0x19e911);}finally{_0x5f0df6(!0x1);}},'loading':_0x1887b4,'error':_0x41b68e};}function _0x5bec31(){const _0x1efa54=_0x35a0;let [_0x2754c8,_0x19bc24]=(0x0,_0x16cf4a['useState'])(!0x1),[_0x4b6025,_0x495431]=(0x0,_0x16cf4a[_0x1efa54(0x10f)])(null);return{'updateTicket':async _0x445fa7=>{const _0x513052=_0x1efa54;try{return _0x19bc24(!0x0),_0x495431(null),(await _0x16238d[_0x513052(0x100)][_0x513052(0xd1)](_0x445fa7))[_0x513052(0xf2)];}catch(_0x1974c4){let _0x3959f0=_0x1974c4 instanceof Error?_0x1974c4['message']:'Failed\x20to\x20update\x20ticket';throw _0x495431(_0x3959f0),Error(_0x3959f0);}finally{_0x19bc24(!0x1);}},'loading':_0x2754c8,'error':_0x4b6025};}function _0x1e244d(){let [_0x2c83d4,_0x518f8c]=(0x0,_0x16cf4a['useState'])(!0x1),[_0x17864e,_0x4b00d7]=(0x0,_0x16cf4a['useState'])(null);return{'escalateTicket':async _0x27ada8=>{const _0x5ee30c=_0x35a0;try{return _0x518f8c(!0x0),_0x4b00d7(null),(await _0x16238d[_0x5ee30c(0x100)]['escalateTicket'](_0x27ada8))['ticket'];}catch(_0x10fe42){let _0x2499bf=_0x10fe42 instanceof Error?_0x10fe42['message']:_0x5ee30c(0xdc);throw _0x4b00d7(_0x2499bf),Error(_0x2499bf);}finally{_0x518f8c(!0x1);}},'loading':_0x2c83d4,'error':_0x17864e};}function _0x2fa196(){const _0x38f465=_0x35a0;let [_0x5babe3,_0x1fce11]=(0x0,_0x16cf4a[_0x38f465(0x10f)])(!0x1),[_0x3b5087,_0x180504]=(0x0,_0x16cf4a[_0x38f465(0x10f)])(null);return{'addMessage':async _0x32b2bb=>{const _0x4af74c=_0x38f465;try{return _0x1fce11(!0x0),_0x180504(null),(await _0x16238d['api']['addTicketMessage'](_0x32b2bb))['message'];}catch(_0x734607){let _0x5a25ca=_0x734607 instanceof Error?_0x734607['message']:_0x4af74c(0x114);throw _0x180504(_0x5a25ca),Error(_0x5a25ca);}finally{_0x1fce11(!0x1);}},'loading':_0x5babe3,'error':_0x3b5087};}}},_0x583c35=>{_0x583c35['O'](0x0,[0x2603,0x259f,0x16fd,0x1b1b,0x492,0x1cbe],()=>_0x583c35(_0x583c35['s']=0xb73f)),_N_E=_0x583c35['O']();}]));